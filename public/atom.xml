<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>iyihua</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2016-07-22T14:04:43.942Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>Wanglv Yihua</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>关于java项目中如何读取配置文件</title>
    <link href="http://yoursite.com/2016/07/22/%E5%85%B3%E4%BA%8Ejava%E9%A1%B9%E7%9B%AE%E4%B8%AD%E5%A6%82%E4%BD%95%E8%AF%BB%E5%8F%96%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/"/>
    <id>http://yoursite.com/2016/07/22/关于java项目中如何读取配置文件/</id>
    <published>2016-07-22T01:27:32.000Z</published>
    <updated>2016-07-22T14:04:43.942Z</updated>
    
    <content type="html">&lt;h1 id=&quot;关于java项目中如何读取配置文件&quot;&gt;&lt;a href=&quot;#关于java项目中如何读取配置文件&quot; class=&quot;headerlink&quot; title=&quot;关于java项目中如何读取配置文件&quot;&gt;&lt;/a&gt;关于java项目中如何读取配置文件&lt;/h1&gt;&lt;h2 id=&quot;Using-multiple-property-files-via-PropertyPlaceholderConfigurer-in-multiple-projects-modules&quot;&gt;&lt;a href=&quot;#Using-multiple-property-files-via-PropertyPlaceholderConfigurer-in-multiple-projects-modules&quot; class=&quot;headerlink&quot; title=&quot;- Using multiple property files (via PropertyPlaceholderConfigurer) in multiple projects/modules&quot;&gt;&lt;/a&gt;- Using multiple property files (via PropertyPlaceholderConfigurer) in multiple projects/modules&lt;/h2&gt;&lt;p&gt;If you ensure that every place holder, in each of the contexts involved, is ignoring unresolvable keys then both of these approaches work. For example:&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;context:property-placeholder&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;location=&amp;quot;classpath:dao.properties,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          classpath:services.properties,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          classpath:user.properties&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ignore-unresolvable=&amp;quot;true&amp;quot;/&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;or&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;bean id=&amp;quot;propertyConfigurer&amp;quot; class=&amp;quot;org.springframework.beans.factory.config.PropertyPlaceholderConfigurer&amp;quot;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;property name=&amp;quot;locations&amp;quot;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;lt;list&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;lt;value&amp;gt;classpath:dao.properties&amp;lt;/value&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;lt;value&amp;gt;classpath:services.properties&amp;lt;/value&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;lt;value&amp;gt;classpath:user.properties&amp;lt;/value&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;lt;/list&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;/property&amp;gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;property name=&amp;quot;ignoreUnresolvablePlaceholders&amp;quot; value=&amp;quot;true&amp;quot;/&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;/bean&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;Spring-MVC-read-file-from-src-main-resources&quot;&gt;&lt;a href=&quot;#Spring-MVC-read-file-from-src-main-resources&quot; class=&quot;headerlink&quot; title=&quot;- Spring MVC : read file from src/main/resources&quot;&gt;&lt;/a&gt;- Spring MVC : read file from src/main/resources&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Resource resource = new ClassPathResource(fileLocationInClasspath);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;InputStream resourceInputStream = resource.getInputStream();&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;How-do-I-load-a-resource-and-use-its-contents-as-a-string-in-Spring&quot;&gt;&lt;a href=&quot;#How-do-I-load-a-resource-and-use-its-contents-as-a-string-in-Spring&quot; class=&quot;headerlink&quot; title=&quot;- How do I load a resource and use its contents as a string in Spring&quot;&gt;&lt;/a&gt;- How do I load a resource and use its contents as a string in Spring&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;bean id=&amp;quot;contents&amp;quot; class=&amp;quot;org.apache.commons.io.IOUtils&amp;quot; factory-method=&amp;quot;toString&amp;quot;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;constructor-arg value=&amp;quot;classpath:path/to/resource.txt&amp;quot; type=&amp;quot;java.io.InputStream&amp;quot; /&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;/bean&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;This solution requires Apache Commons IO.&lt;/p&gt;
&lt;p&gt;Another solution, suggested by @Parvez, without Apache Commons IO dependency is&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;bean id=&amp;quot;contents&amp;quot; class=&amp;quot;java.lang.String&amp;quot;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;constructor-arg&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;lt;bean class=&amp;quot;org.springframework.util.FileCopyUtils&amp;quot; factory-method=&amp;quot;copyToByteArray&amp;quot;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;lt;constructor-arg value=&amp;quot;classpath:path/to/resource.txt&amp;quot; type=&amp;quot;java.io.InputStream&amp;quot; /&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;lt;/bean&amp;gt;     &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;/constructor-arg&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;/bean&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;关于java项目中如何读取配置文件&quot;&gt;&lt;a href=&quot;#关于java项目中如何读取配置文件&quot; class=&quot;headerlink&quot; title=&quot;关于java项目中如何读取配置文件&quot;&gt;&lt;/a&gt;关于java项目中如何读取配置文件&lt;/h1&gt;&lt;h2 id=&quot;Using
    
    </summary>
    
    
      <category term="java" scheme="http://yoursite.com/tags/java/"/>
    
      <category term="spring mvc" scheme="http://yoursite.com/tags/spring-mvc/"/>
    
      <category term="spring" scheme="http://yoursite.com/tags/spring/"/>
    
      <category term="读取配置文件" scheme="http://yoursite.com/tags/%E8%AF%BB%E5%8F%96%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/"/>
    
      <category term="property file" scheme="http://yoursite.com/tags/property-file/"/>
    
  </entry>
  
  <entry>
    <title>[使用spring-boot+spring-cloud一步步搭建微服务架构]一-开始一个spring-boot应用</title>
    <link href="http://yoursite.com/2016/07/11/%E4%BD%BF%E7%94%A8spring-boot-spring-cloud%E4%B8%80%E6%AD%A5%E6%AD%A5%E6%90%AD%E5%BB%BA%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84-%E4%B8%80-%E5%BC%80%E5%A7%8B%E4%B8%80%E4%B8%AAspring-boot%E5%BA%94%E7%94%A8/"/>
    <id>http://yoursite.com/2016/07/11/使用spring-boot-spring-cloud一步步搭建微服务架构-一-开始一个spring-boot应用/</id>
    <published>2016-07-11T12:24:25.000Z</published>
    <updated>2016-07-11T13:30:20.548Z</updated>
    
    <content type="html">&lt;h2 id=&quot;一-目标愿景&quot;&gt;&lt;a href=&quot;#一-目标愿景&quot; class=&quot;headerlink&quot; title=&quot;一. 目标愿景&quot;&gt;&lt;/a&gt;一. 目标愿景&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;我们的目标是：使用spring  boot + spring cloud一步步搭建微服务架构&lt;/strong&gt;&lt;br&gt;本系列demo项目githu地址：&lt;br&gt;&lt;a href=&quot;https://github.com/YihuaWanglv/lannisi&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/YihuaWanglv/lannisi&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;1-都说服务化，以前我们是怎么搭建soa服务的？之前的架构有什么未达理想？&quot;&gt;&lt;a href=&quot;#1-都说服务化，以前我们是怎么搭建soa服务的？之前的架构有什么未达理想？&quot; class=&quot;headerlink&quot; title=&quot;1. 都说服务化，以前我们是怎么搭建soa服务的？之前的架构有什么未达理想？&quot;&gt;&lt;/a&gt;1. 都说服务化，以前我们是怎么搭建soa服务的？之前的架构有什么未达理想？&lt;/h3&gt;&lt;p&gt;之前，一个比较流行的soa服务化方案是dubbo/dubbox+zookeeper，配上spring boot。&lt;br&gt;这个方案是比较流行的方案之一，但是有几点未达理想的地方：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;1) dubbo的性能并不如一些其他服务化开发工具，比如thrift和ice。&lt;/li&gt;
&lt;li&gt;2) dubbo是一个RPC的半完善解决方案，中规中矩，配套的软件基础设施不全。问题定位、熔断和监控方面的问题让人没有那么的放心。&lt;/li&gt;
&lt;li&gt;3) 服务提供者和消费者都需要使用xml文件配置，不优雅。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;2-为什么使用Spring-Cloud-？&quot;&gt;&lt;a href=&quot;#2-为什么使用Spring-Cloud-？&quot; class=&quot;headerlink&quot; title=&quot;2. 为什么使用Spring Cloud ？&quot;&gt;&lt;/a&gt;2. 为什么使用Spring Cloud ？&lt;/h3&gt;&lt;p&gt;Spring Cloud 提供了一整套分布式服务开发的工具，带着一些问题，我们希望在spring could中寻找答案。&lt;br&gt;Spring Cloud有什么特点？&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;1) 集成了springboot与docker，用起来很方便。配置中心，服务中心，服务，客户端等等组件开启，都非常的简单，往往只需几行代码。&lt;/li&gt;
&lt;li&gt;2) 提供了一整套分布式服务开发的工具，从边缘服务的Zuul，到服务发现Eureka ，再到hystrix 熔断机制，是一套完整的生态。特别是hystrix，提供了完整的熔断机制，可以很轻易的引入现有系统。&lt;/li&gt;
&lt;li&gt;3) Spring Cloud有一个不好的地方是，实际编码会有侵入性。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;3-为什么使用spring-boot？&quot;&gt;&lt;a href=&quot;#3-为什么使用spring-boot？&quot; class=&quot;headerlink&quot; title=&quot;3. 为什么使用spring boot？&quot;&gt;&lt;/a&gt;3. 为什么使用spring boot？&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;1) spring boot有pivotal和netfix背书，是一套完整的企业级应用的开发方案，天然集成分布式云架构spring-cloud。&lt;/li&gt;
&lt;li&gt;2) spring-boot的完全抛弃以往java项目配置文件过多的“陋习”，开启一个项目只需几行代码。&lt;/li&gt;
&lt;li&gt;3) Sprinboot允许项目使用内嵌的tomcat像启动普通java程序一样启动一个web项目.由于有了这个特性，项目不再需要打war包部署到tomcat，而是打成jar包，直接使用java -jar命令启动.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;二-开始第一个springboot项目&quot;&gt;&lt;a href=&quot;#二-开始第一个springboot项目&quot; class=&quot;headerlink&quot; title=&quot;二. 开始第一个springboot项目&quot;&gt;&lt;/a&gt;二. 开始第一个springboot项目&lt;/h2&gt;&lt;p&gt;在一切开始之前，我们首先要知道如何开始一个springboot项目。&lt;/p&gt;
&lt;h3 id=&quot;1-创建一个空的maven项目，pom-xml中添加maven依赖&quot;&gt;&lt;a href=&quot;#1-创建一个空的maven项目，pom-xml中添加maven依赖&quot; class=&quot;headerlink&quot; title=&quot;1. 创建一个空的maven项目，pom.xml中添加maven依赖&quot;&gt;&lt;/a&gt;1. 创建一个空的maven项目，pom.xml中添加maven依赖&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;dependencies&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;dependency&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;lt;artifactId&amp;gt;spring-boot-starter&amp;lt;/artifactId&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;/dependency&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;dependency&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;lt;artifactId&amp;gt;spring-boot-starter-web&amp;lt;/artifactId&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;/dependency&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;/dependencies&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;2-编写项目启动入口App-java&quot;&gt;&lt;a href=&quot;#2-编写项目启动入口App-java&quot; class=&quot;headerlink&quot; title=&quot;2. 编写项目启动入口App.java&quot;&gt;&lt;/a&gt;2. 编写项目启动入口App.java&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;@SpringBootApplication&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;public class App &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    public static void main(String[] args) throws Exception &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        SpringApplication.run(App.class, args);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ok! done!&lt;br&gt;这样就已经能直接使用spring boot了.&lt;br&gt;启动App.java，spring boot就会使用内置的tomcat直接在本机的8080端口开启一个服务。&lt;/p&gt;
&lt;h3 id=&quot;3-再进一步，为应用引入spring-mvc&quot;&gt;&lt;a href=&quot;#3-再进一步，为应用引入spring-mvc&quot; class=&quot;headerlink&quot; title=&quot;3. 再进一步，为应用引入spring mvc&quot;&gt;&lt;/a&gt;3. 再进一步，为应用引入spring mvc&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;@Controller&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;public class SampleController &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    @RequestMapping(&amp;quot;/&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    @ResponseBody&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    String home() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        String data = &amp;quot;&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return &amp;quot;Hello World!&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;启动App.java，访问localhost:8080, 即可遇见“Hello World!”&lt;/p&gt;
&lt;p&gt;helloword项目也可参照：&lt;a href=&quot;https://github.com/YihuaWanglv/lannisi&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/YihuaWanglv/lannisi&lt;/a&gt; 下的boot-sample-helloword项目。&lt;br&gt;&lt;a href=&quot;https://github.com/YihuaWanglv/lannisi/tree/master/boot-sample-helloword&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/YihuaWanglv/lannisi/tree/master/boot-sample-helloword&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;一-目标愿景&quot;&gt;&lt;a href=&quot;#一-目标愿景&quot; class=&quot;headerlink&quot; title=&quot;一. 目标愿景&quot;&gt;&lt;/a&gt;一. 目标愿景&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;我们的目标是：使用spring  boot + spring cloud一步步搭建微服务
    
    </summary>
    
    
      <category term="java" scheme="http://yoursite.com/tags/java/"/>
    
      <category term="spring boot" scheme="http://yoursite.com/tags/spring-boot/"/>
    
      <category term="spring cloud" scheme="http://yoursite.com/tags/spring-cloud/"/>
    
      <category term="微服务" scheme="http://yoursite.com/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/"/>
    
      <category term="使用spring-boot+spring-cloud一步步搭建微服务架构" scheme="http://yoursite.com/tags/%E4%BD%BF%E7%94%A8spring-boot-spring-cloud%E4%B8%80%E6%AD%A5%E6%AD%A5%E6%90%AD%E5%BB%BA%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84/"/>
    
  </entry>
  
  <entry>
    <title>使用RAP作为接口管理和调试的工具</title>
    <link href="http://yoursite.com/2016/07/08/%E4%BD%BF%E7%94%A8RAP%E4%BD%9C%E4%B8%BA%E6%8E%A5%E5%8F%A3%E7%AE%A1%E7%90%86%E5%92%8C%E8%B0%83%E8%AF%95%E7%9A%84%E5%B7%A5%E5%85%B7/"/>
    <id>http://yoursite.com/2016/07/08/使用RAP作为接口管理和调试的工具/</id>
    <published>2016-07-08T06:06:27.000Z</published>
    <updated>2016-07-11T12:08:57.865Z</updated>
    
    <content type="html">&lt;h2 id=&quot;一、为什么使用RAP？&quot;&gt;&lt;a href=&quot;#一、为什么使用RAP？&quot; class=&quot;headerlink&quot; title=&quot;一、为什么使用RAP？&quot;&gt;&lt;/a&gt;一、为什么使用RAP？&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;接口定义和管理，传统的方式是使用word文档。但word文档管理接口文档有不少问题。&lt;br&gt;比如，word文档在相互传递的过程中，可能会导致彼此文档版本不一致；word文档难以结构化的集中维护各项目的文档，而且编写麻烦；word文档的接口定义功能单一，仅仅提供文档功能。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;而是用RAP作为接口文档定义管理的工具，则为我们提供了以下功能：&lt;br&gt;1.可以按团队和项目结构化的管理接口文档。&lt;br&gt;2.提供统一方便的接口定义方式。&lt;br&gt;3.为前端提供mock数据，以便在后端没有开发好后端接口前，提前根据接口进行开发。&lt;br&gt;4.校验后端提供的接口的数据格式和字段是否符合要求。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;虽然RAP在自动化测试方面功能还有欠缺，仍不失为接口管理一个十分方便的工具。&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;二、RAP安装部署&quot;&gt;&lt;a href=&quot;#二、RAP安装部署&quot; class=&quot;headerlink&quot; title=&quot;二、RAP安装部署&quot;&gt;&lt;/a&gt;二、RAP安装部署&lt;/h2&gt;&lt;h3 id=&quot;1-下载RAP&quot;&gt;&lt;a href=&quot;#1-下载RAP&quot; class=&quot;headerlink&quot; title=&quot;1.下载RAP&quot;&gt;&lt;/a&gt;1.下载RAP&lt;/h3&gt;&lt;p&gt;在RAP的github主页上下载最新版本war包&lt;/p&gt;
&lt;h3 id=&quot;2-环境准备&quot;&gt;&lt;a href=&quot;#2-环境准备&quot; class=&quot;headerlink&quot; title=&quot;2.环境准备&quot;&gt;&lt;/a&gt;2.环境准备&lt;/h3&gt;&lt;p&gt;需要tomcat和mysql&lt;/p&gt;
&lt;h3 id=&quot;3-部署&quot;&gt;&lt;a href=&quot;#3-部署&quot; class=&quot;headerlink&quot; title=&quot;3.部署&quot;&gt;&lt;/a&gt;3.部署&lt;/h3&gt;&lt;p&gt;RAP在tomcat中要使用ROOT的方式部署。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;把下载好的war包放入tomcat的webapps目录下，然后删除tomcat中webapps目录下原先的ROOT文件夹，重命名war包为ROOT.war&lt;/li&gt;
&lt;li&gt;在mysql中建立rap_db数据库，导入RAPgithub代码中提供的sql脚本初始化数据库&lt;/li&gt;
&lt;li&gt;启动tomcat&lt;/li&gt;
&lt;li&gt;访问&lt;a href=&quot;http://localhost:8080/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://localhost:8080/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;三、RAP的使用&quot;&gt;&lt;a href=&quot;#三、RAP的使用&quot; class=&quot;headerlink&quot; title=&quot;三、RAP的使用&quot;&gt;&lt;/a&gt;三、RAP的使用&lt;/h2&gt;&lt;h3 id=&quot;1-注册账号&quot;&gt;&lt;a href=&quot;#1-注册账号&quot; class=&quot;headerlink&quot; title=&quot;1.注册账号&quot;&gt;&lt;/a&gt;1.注册账号&lt;/h3&gt;&lt;p&gt;RAP自带账号管理和登陆功能，使用前先注册账号，登陆即可&lt;/p&gt;
&lt;h3 id=&quot;2-添加团队、项目产品线等。&quot;&gt;&lt;a href=&quot;#2-添加团队、项目产品线等。&quot; class=&quot;headerlink&quot; title=&quot;2.添加团队、项目产品线等。&quot;&gt;&lt;/a&gt;2.添加团队、项目产品线等。&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;创建团队&lt;br&gt;&lt;img src=&quot;/images/rap-001.png&quot; alt=&quot;&quot;&gt;&lt;/li&gt;
&lt;li&gt;创建产品线&lt;br&gt;&lt;img src=&quot;/images/rap-002.png&quot; alt=&quot;&quot;&gt;&lt;br&gt;&lt;img src=&quot;/images/rap-003.png&quot; alt=&quot;&quot;&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;3-分组和项目管理&quot;&gt;&lt;a href=&quot;#3-分组和项目管理&quot; class=&quot;headerlink&quot; title=&quot;3.分组和项目管理&quot;&gt;&lt;/a&gt;3.分组和项目管理&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;/images/rap-004.png&quot; alt=&quot;&quot;&gt;&lt;br&gt;&lt;img src=&quot;/images/rap-009.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;4-添加模块和页面&quot;&gt;&lt;a href=&quot;#4-添加模块和页面&quot; class=&quot;headerlink&quot; title=&quot;4.添加模块和页面&quot;&gt;&lt;/a&gt;4.添加模块和页面&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;/images/rap-005.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;5-添加接口&quot;&gt;&lt;a href=&quot;#5-添加接口&quot; class=&quot;headerlink&quot; title=&quot;5.添加接口&quot;&gt;&lt;/a&gt;5.添加接口&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;/images/rap-006.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;6-为返回值字段设置自定义的mock数据&quot;&gt;&lt;a href=&quot;#6-为返回值字段设置自定义的mock数据&quot; class=&quot;headerlink&quot; title=&quot;6.为返回值字段设置自定义的mock数据&quot;&gt;&lt;/a&gt;6.为返回值字段设置自定义的mock数据&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;/images/rap-007.png&quot; alt=&quot;&quot;&gt;&lt;br&gt;我们可以为不同的字段自定义不同的mock数据，已适应实际需要。&lt;/p&gt;
&lt;h3 id=&quot;7-前端使用接口mock数据提前进行开发&quot;&gt;&lt;a href=&quot;#7-前端使用接口mock数据提前进行开发&quot; class=&quot;headerlink&quot; title=&quot;7.前端使用接口mock数据提前进行开发&quot;&gt;&lt;/a&gt;7.前端使用接口mock数据提前进行开发&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;/images/rap-008.png&quot; alt=&quot;&quot;&gt;&lt;br&gt;这个例子中的“项目根路径”：localhost:8080/mockjs/1&lt;br&gt;就是这个mock服务的模拟服务路径&lt;br&gt;前端访问：&lt;a href=&quot;http://localhost:8080/mockjs/1/client/machine/activate?drive_id=sfd&amp;amp;activate_code=sdf&amp;amp;mac_address=sdf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://localhost:8080/mockjs/1/client/machine/activate?drive_id=sfd&amp;amp;activate_code=sdf&amp;amp;mac_address=sdf&lt;/a&gt;&lt;br&gt;就是访问我们模拟的接口地址: /client/machine/activate&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;一、为什么使用RAP？&quot;&gt;&lt;a href=&quot;#一、为什么使用RAP？&quot; class=&quot;headerlink&quot; title=&quot;一、为什么使用RAP？&quot;&gt;&lt;/a&gt;一、为什么使用RAP？&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;接口定义和管理，传统的方式是使用word文档。但w
    
    </summary>
    
    
      <category term="接口文档" scheme="http://yoursite.com/tags/%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/"/>
    
      <category term="RAP" scheme="http://yoursite.com/tags/RAP/"/>
    
      <category term="mock" scheme="http://yoursite.com/tags/mock/"/>
    
  </entry>
  
  <entry>
    <title>[dev][collect][2016-06]collect-of-dev</title>
    <link href="http://yoursite.com/2016/07/07/dev-collect-2016-06-collect-of-dev/"/>
    <id>http://yoursite.com/2016/07/07/dev-collect-2016-06-collect-of-dev/</id>
    <published>2016-07-07T03:08:24.000Z</published>
    <updated>2016-07-11T12:15:21.828Z</updated>
    
    <content type="html">&lt;h2 id=&quot;2016-06&quot;&gt;&lt;a href=&quot;#2016-06&quot; class=&quot;headerlink&quot; title=&quot;2016-06&quot;&gt;&lt;/a&gt;2016-06&lt;/h2&gt;&lt;h3 id=&quot;2016-06-24&quot;&gt;&lt;a href=&quot;#2016-06-24&quot; class=&quot;headerlink&quot; title=&quot;2016-06-24&quot;&gt;&lt;/a&gt;2016-06-24&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;【直播全文记录】 从零开始搭建高可用IM系统&lt;br&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MzAwMDU1MTE1OQ==&amp;amp;mid=206924771&amp;amp;idx=1&amp;amp;sn=4705b832c410765a3c89acfa1300b0b6&amp;amp;scene=21#wechat_redirect&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://mp.weixin.qq.com/s?__biz=MzAwMDU1MTE1OQ==&amp;amp;mid=206924771&amp;amp;idx=1&amp;amp;sn=4705b832c410765a3c89acfa1300b0b6&amp;amp;scene=21#wechat_redirect&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;如何设计类似微信的多终端数据同步协议 | Grouk实践分享&lt;br&gt;&lt;a href=&quot;http://chuansong.me/n/1718596&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://chuansong.me/n/1718596&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;2016-06-22&quot;&gt;&lt;a href=&quot;#2016-06-22&quot; class=&quot;headerlink&quot; title=&quot;2016-06-22&quot;&gt;&lt;/a&gt;2016-06-22&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;基于Dubbo框架构建分布式服务&lt;br&gt;&lt;a href=&quot;http://shiyanjun.cn/archives/1075.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://shiyanjun.cn/archives/1075.html&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;高并发性能调试经验分享&lt;br&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/21348220&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://zhuanlan.zhihu.com/p/21348220&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Java进阶（三）多线程开发关键技术&lt;br&gt;&lt;a href=&quot;http://www.jasongj.com/java/multi_thread/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.jasongj.com/java/multi_thread/&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;blog kafka&lt;br&gt;&lt;a href=&quot;http://www.jasongj.com/tags/Kafka/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.jasongj.com/tags/Kafka/&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;如何构建Android MVVM应用程序&lt;br&gt;&lt;a href=&quot;http://www.jianshu.com/p/2fc41a310f79&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.jianshu.com/p/2fc41a310f79&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;超详细React Native实现微信好友/朋友圈分享功能-Android/iOS双平台通用&lt;br&gt;&lt;a href=&quot;http://www.lcode.org/%E8%B6%85%E8%AF%A6%E7%BB%86react-native%E5%AE%9E%E7%8E%B0%E5%BE%AE%E4%BF%A1%E5%A5%BD%E5%8F%8B%E6%9C%8B%E5%8F%8B%E5%9C%88%E5%88%86%E4%BA%AB%E5%8A%9F%E8%83%BD-androidios%E5%8F%8C%E5%B9%B3%E5%8F%B0/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.lcode.org/%E8%B6%85%E8%AF%A6%E7%BB%86react-native%E5%AE%9E%E7%8E%B0%E5%BE%AE%E4%BF%A1%E5%A5%BD%E5%8F%8B%E6%9C%8B%E5%8F%8B%E5%9C%88%E5%88%86%E4%BA%AB%E5%8A%9F%E8%83%BD-androidios%E5%8F%8C%E5%B9%B3%E5%8F%B0/&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;SHELL编程之常用技巧&lt;br&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MzIxNDMyODgyMA==&amp;amp;mid=2247483698&amp;amp;idx=1&amp;amp;sn=3b52493d202362aae0bf511002e63d52&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://mp.weixin.qq.com/s?__biz=MzIxNDMyODgyMA==&amp;amp;mid=2247483698&amp;amp;idx=1&amp;amp;sn=3b52493d202362aae0bf511002e63d52&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;让你爱上写作的 11 款 Markdown 工具&lt;br&gt;&lt;a href=&quot;http://www.ifanr.com/app/665209&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.ifanr.com/app/665209&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;基于Docker搭建Hadoop集群之升级版&lt;br&gt;&lt;a href=&quot;http://kiwenlau.com/2016/06/12/160612-hadoop-cluster-docker-update/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://kiwenlau.com/2016/06/12/160612-hadoop-cluster-docker-update/&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Kafka设计解析（一）- Kafka背景及架构介绍&lt;br&gt;&lt;a href=&quot;http://www.jasongj.com/2015/03/10/KafkaColumn1/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.jasongj.com/2015/03/10/KafkaColumn1/&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;2016-06-15&quot;&gt;&lt;a href=&quot;#2016-06-15&quot; class=&quot;headerlink&quot; title=&quot;2016-06-15&quot;&gt;&lt;/a&gt;2016-06-15&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;淘拍拍前端架构2.0-简介&lt;br&gt;&lt;a href=&quot;http://www.w3cfuns.com/notes/25101/33114eae47bbda0c50fb67eeb4a7fd6c.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.w3cfuns.com/notes/25101/33114eae47bbda0c50fb67eeb4a7fd6c.html&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;轻松监控上万台服务器：企业运维监控平台架构设计与实践指南&lt;br&gt;&lt;a href=&quot;http://dbaplus.cn/news-21-466-1.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://dbaplus.cn/news-21-466-1.html&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Mesos+Zookeeper+Marathon+Docker分布式集群管理最佳实践&lt;br&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MzI4NTA1MDEwNg==&amp;amp;mid=2650755658&amp;amp;idx=1&amp;amp;sn=9f5e4831b2c27d66e4296c49ffcd3d7c&amp;amp;scene=21#wechat_redirect&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://mp.weixin.qq.com/s?__biz=MzI4NTA1MDEwNg==&amp;amp;mid=2650755658&amp;amp;idx=1&amp;amp;sn=9f5e4831b2c27d66e4296c49ffcd3d7c&amp;amp;scene=21#wechat_redirect&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;网易蜂巢微服务架构：用RabbitMQ实现轻量级通信&lt;br&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MzI4NTA1MDEwNg==&amp;amp;mid=2650755639&amp;amp;idx=2&amp;amp;sn=0e43c1b7168dbcd60582326fb20f2f19&amp;amp;scene=21#wechat_redirect&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://mp.weixin.qq.com/s?__biz=MzI4NTA1MDEwNg==&amp;amp;mid=2650755639&amp;amp;idx=2&amp;amp;sn=0e43c1b7168dbcd60582326fb20f2f19&amp;amp;scene=21#wechat_redirect&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;使用Vue.js从零构建GitHub项目浏览器&lt;br&gt;&lt;a href=&quot;http://xlbd.me/vue-demo-github-file-explorer/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://xlbd.me/vue-demo-github-file-explorer/&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;2016-06-07&quot;&gt;&lt;a href=&quot;#2016-06-07&quot; class=&quot;headerlink&quot; title=&quot;2016-06-07&quot;&gt;&lt;/a&gt;2016-06-07&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;搭建Git服务器&lt;br&gt;&lt;a href=&quot;http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000/00137583770360579bc4b458f044ce7afed3df579123eca000&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000/00137583770360579bc4b458f044ce7afed3df579123eca000&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;gitlab centos一键安装&lt;br&gt;&lt;a href=&quot;http://blog.csdn.net/asd131531/article/details/42374285&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://blog.csdn.net/asd131531/article/details/42374285&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://www.linuxidc.com/Linux/2014-08/105137.htm&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.linuxidc.com/Linux/2014-08/105137.htm&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;2016-06&quot;&gt;&lt;a href=&quot;#2016-06&quot; class=&quot;headerlink&quot; title=&quot;2016-06&quot;&gt;&lt;/a&gt;2016-06&lt;/h2&gt;&lt;h3 id=&quot;2016-06-24&quot;&gt;&lt;a href=&quot;#2016-06-24&quot; class=&quot;head
    
    </summary>
    
    
      <category term="android" scheme="http://yoursite.com/tags/android/"/>
    
      <category term="java" scheme="http://yoursite.com/tags/java/"/>
    
      <category term="collect" scheme="http://yoursite.com/tags/collect/"/>
    
      <category term="dev" scheme="http://yoursite.com/tags/dev/"/>
    
      <category term="collect-of-dev" scheme="http://yoursite.com/tags/collect-of-dev/"/>
    
  </entry>
  
  <entry>
    <title>在单服务器上安装部署FastDFS+Nginx</title>
    <link href="http://yoursite.com/2016/07/07/%E5%9C%A8%E5%8D%95%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2FastDFS-Nginx/"/>
    <id>http://yoursite.com/2016/07/07/在单服务器上安装部署FastDFS-Nginx/</id>
    <published>2016-07-07T02:54:21.000Z</published>
    <updated>2016-07-07T14:04:19.326Z</updated>
    
    <content type="html">&lt;h1 id=&quot;在单服务器上安装部署FastDFS-Nginx&quot;&gt;&lt;a href=&quot;#在单服务器上安装部署FastDFS-Nginx&quot; class=&quot;headerlink&quot; title=&quot;在单服务器上安装部署FastDFS+Nginx&quot;&gt;&lt;/a&gt;在单服务器上安装部署FastDFS+Nginx&lt;/h1&gt;&lt;p&gt;那么多服务器和软件安装配置中，FastDFS算是比较复杂的一个了。&lt;br&gt;这个例子storage和tracker均部署在同一台服务器（ip：192.168.1.134）&lt;br&gt;我部署的服务系版本是centos6.7&lt;/p&gt;
&lt;h2 id=&quot;FastDFS安装配置&quot;&gt;&lt;a href=&quot;#FastDFS安装配置&quot; class=&quot;headerlink&quot; title=&quot;FastDFS安装配置&quot;&gt;&lt;/a&gt;FastDFS安装配置&lt;/h2&gt;&lt;h3 id=&quot;Tracker的安装及配置&quot;&gt;&lt;a href=&quot;#Tracker的安装及配置&quot; class=&quot;headerlink&quot; title=&quot;Tracker的安装及配置&quot;&gt;&lt;/a&gt;Tracker的安装及配置&lt;/h3&gt;&lt;h4 id=&quot;1-安装编译器&quot;&gt;&lt;a href=&quot;#1-安装编译器&quot; class=&quot;headerlink&quot; title=&quot;1.安装编译器&quot;&gt;&lt;/a&gt;1.安装编译器&lt;/h4&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;yum install -y gcc gcc-c++&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;2-下载安装libevent&quot;&gt;&lt;a href=&quot;#2-下载安装libevent&quot; class=&quot;headerlink&quot; title=&quot;2.下载安装libevent&quot;&gt;&lt;/a&gt;2.下载安装libevent&lt;/h4&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;wget https://sourceforge.net/projects/levent/files/libevent/libevent-2.0/libevent-2.0.22-stable.tar.gz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tar xvzf libevent-2.0.22-stable.tar.gz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cd libevent-2.0.22-stable&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./configure&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;make &amp;amp;&amp;amp; make install&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;3-下载安装fastDFS&quot;&gt;&lt;a href=&quot;#3-下载安装fastDFS&quot; class=&quot;headerlink&quot; title=&quot;3.下载安装fastDFS&quot;&gt;&lt;/a&gt;3.下载安装fastDFS&lt;/h4&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;wget http://code.google.com/p/fastdfs/downloads/detail?name=FastDFS_v4.06.tar.gz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;（code.google.com已无法访问，可以自己手动下载再上传到服务器）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tar -xvzf FastDFS_v4.06.tar.gz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cd FastDFS&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./make.sh&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./make.sh install&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;安装成功后/usr/local/bin下会出现一系列fastDFS命令&lt;/p&gt;
&lt;h4 id=&quot;4-配置tracker&quot;&gt;&lt;a href=&quot;#4-配置tracker&quot; class=&quot;headerlink&quot; title=&quot;4.配置tracker&quot;&gt;&lt;/a&gt;4.配置tracker&lt;/h4&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;vim /etc/fdfs/tracker.conf&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;修改base_path以存储tracker信息（这里不做修改，使用默认路径/home/yuqing/fastdfs，需要先行创建目录）&lt;/p&gt;
&lt;h4 id=&quot;5-启动tracker&quot;&gt;&lt;a href=&quot;#5-启动tracker&quot; class=&quot;headerlink&quot; title=&quot;5.启动tracker&quot;&gt;&lt;/a&gt;5.启动tracker&lt;/h4&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;/usr/local/bin/fdfs_trackerd /etc/fdfs/tracker.conf&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Storage配置-gt-Storage1配置&quot;&gt;&lt;a href=&quot;#Storage配置-gt-Storage1配置&quot; class=&quot;headerlink&quot; title=&quot;Storage配置 -&amp;gt; Storage1配置&quot;&gt;&lt;/a&gt;Storage配置 -&amp;gt; Storage1配置&lt;/h3&gt;&lt;p&gt;正常情况下storage1部署一个服务器，storage2部署一个服务器，tracker部署一个服务器。&lt;br&gt;我这里只部署一个storage一个tracker，并部署在同一个服务器&lt;/p&gt;
&lt;h4 id=&quot;1-3：参考Tracker安装步骤&quot;&gt;&lt;a href=&quot;#1-3：参考Tracker安装步骤&quot; class=&quot;headerlink&quot; title=&quot;1~3：参考Tracker安装步骤&quot;&gt;&lt;/a&gt;1~3：参考Tracker安装步骤&lt;/h4&gt;&lt;h4 id=&quot;4-配置storage&quot;&gt;&lt;a href=&quot;#4-配置storage&quot; class=&quot;headerlink&quot; title=&quot;4.配置storage&quot;&gt;&lt;/a&gt;4.配置storage&lt;/h4&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;vim /etc/fdfs/storage.conf&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;修改tracker_server=192.168.1.134:22122&lt;br&gt;修改base_path以存储storage信息（这里不做修改，使用默认路径/home/yuqing/fastdfs，需要先行创建目录）&lt;br&gt;例子：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;group_name=group1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;base_path=/home/yuqing/fastdfs&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;store_path0=/home/yuqing/fastdfs&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tracker_server=192.168.1.134:22122&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;http.server_port=8080      #web server的端口改成8080（与nginx 端口一致）&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h4 id=&quot;5-启动storage&quot;&gt;&lt;a href=&quot;#5-启动storage&quot; class=&quot;headerlink&quot; title=&quot;5.启动storage&quot;&gt;&lt;/a&gt;5.启动storage&lt;/h4&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;/usr/local/bin/fdfs_storaged /etc/fdfs/storage.conf&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;启动过程中，fastDFS会在base_path下的data目录中创建一系列文件夹，以存储数据&lt;/p&gt;
&lt;h3 id=&quot;安装nginx以及fastdfs-nginx-module模块&quot;&gt;&lt;a href=&quot;#安装nginx以及fastdfs-nginx-module模块&quot; class=&quot;headerlink&quot; title=&quot;安装nginx以及fastdfs-nginx-module模块&quot;&gt;&lt;/a&gt;安装nginx以及fastdfs-nginx-module模块&lt;/h3&gt;&lt;p&gt;nginx的rewrite模块和cache模块需要先安装pcre和openssl&lt;/p&gt;
&lt;h4 id=&quot;安装pcre&quot;&gt;&lt;a href=&quot;#安装pcre&quot; class=&quot;headerlink&quot; title=&quot;安装pcre&quot;&gt;&lt;/a&gt;安装pcre&lt;/h4&gt;&lt;p&gt;下载pcre&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;tar zxvf pcre-8.12.tar.gz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cd pcre-8.12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./configure&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;make&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;make install&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h4 id=&quot;安装openssl&quot;&gt;&lt;a href=&quot;#安装openssl&quot; class=&quot;headerlink&quot; title=&quot;安装openssl&quot;&gt;&lt;/a&gt;安装openssl&lt;/h4&gt;&lt;p&gt;centos下解决办法:&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;yum -y install openssl openssl-devel&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h4 id=&quot;安装nginx&quot;&gt;&lt;a href=&quot;#安装nginx&quot; class=&quot;headerlink&quot; title=&quot;安装nginx&quot;&gt;&lt;/a&gt;安装nginx&lt;/h4&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;cd /home/yihua&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;wget http://nginx.org/download/nginx-0.8.55.tar.gz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tar zxvf nginx-0.8.55.tar.gz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cd nginx-0.8.55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./configure --prefix=/opt/nginx --with-http_stub_status_module&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;make &amp;amp;&amp;amp; make install&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;安装fastdfs-nginx-module&quot;&gt;&lt;a href=&quot;#安装fastdfs-nginx-module&quot; class=&quot;headerlink&quot; title=&quot;安装fastdfs-nginx-module&quot;&gt;&lt;/a&gt;安装fastdfs-nginx-module&lt;/h4&gt;&lt;p&gt;下载并上传fastdfs-nginx-module_v1.15.tar.gz&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;tar xzf fastdfs-nginx-module_v1.15.tar.gz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cd /home/yihua/nginx-0.8.55 &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./configure --add-module=/home/yihua/fastdfs-nginx-module/src&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;make; make install&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h4 id=&quot;配置nginx和fastdfs-nginx-module&quot;&gt;&lt;a href=&quot;#配置nginx和fastdfs-nginx-module&quot; class=&quot;headerlink&quot; title=&quot;配置nginx和fastdfs-nginx-module&quot;&gt;&lt;/a&gt;配置nginx和fastdfs-nginx-module&lt;/h4&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;cp /home/yihua/fastdfs-nginx-module/src/mod_fastdfs.conf /etc/fdfs&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;vim /etc/fdfs/mod_fastdfs.conf&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;修改 fastdfs的nginx模块的配置文件 mod_fastdfs.conf&lt;br&gt;一般只需改动以下几个参数即可：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;base_path=/home/yuqing/fastdfs      #保存日志目录&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tracker_server=192.168.1.134:22122    #tracker 服务器的 IP 地址以及端口号&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;storage_server_port=23000            #storage 服务器的端口号&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;group_name=group1                    #当前服务器的 group 名&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;url_have_group_name = true           #文件 url 中是否有 group 名&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;store_path_count=1                   #存储路径个数，需要和 store_path 个数匹配&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;store_path0=/home/yuqing/fastdfs    #存储路径&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;http.need_find_content_type=true     # 从文件 扩展 名查 找 文件 类型 （ nginx 时 为true）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;group_count = 1                      #设置组的个数&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;然后在末尾添加分组信息，目前只有一个分组，就只写一个&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[group1]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;group_name=group1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;storage_server_port=23000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;store_path_count=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;store_path0=/home/yuqing/fastdfs&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;建立 M00 至存储目录的符号连接&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;ln -s /home/yuqing/fastdfs/data /home/yuqing/fastdfs/data/M00&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;将 server 段中的 listen 端口号改为 8080：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;vim /usr/local/nginx/conf/nginx.conf&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;listen       8080;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;在 server 段中添加fastdfs的配置&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;location /group1/M00 &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       root   /home/yuqing/fastdfs/data;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       ngx_fastdfs_module;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h4 id=&quot;准备nginx启动脚本&quot;&gt;&lt;a href=&quot;#准备nginx启动脚本&quot; class=&quot;headerlink&quot; title=&quot;准备nginx启动脚本&quot;&gt;&lt;/a&gt;准备nginx启动脚本&lt;/h4&gt;&lt;p&gt;编辑 /etc/init.d/nginx，如下内容:&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#!/bin/bash&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# nginx Startup script for the Nginx HTTP Server&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# it is v.1.4.7 version.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# chkconfig: - 85 15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# description: Nginx is a high-performance web and proxy server.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# It has a lot of features, but it&amp;apos;s not for everyone.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# processname: nginx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# pidfile: /usr/local/nginx/logs/nginx.pid&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# config: /usr/local/nginx/conf/nginx.conf&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;nginxd=/usr/local/nginx/sbin/nginx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;nginx_config=/usr/local/nginx/conf/nginx.conf&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;nginx_pid=/usr/local/nginx/logs/nginx.pid&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;nginx_lock=/var/lock/subsys/nginx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RETVAL=0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;prog=&amp;quot;nginx&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# Source function library.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;. /etc/rc.d/init.d/functions&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# Source networking configuration.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;. /etc/sysconfig/network&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# Check that networking is up.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[ $&amp;#123;NETWORKING&amp;#125; = &amp;quot;no&amp;quot; ] &amp;amp;&amp;amp; exit 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[ -x $nginxd ] || exit 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# Start nginx daemons functions.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;start() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    nginx_is_run=`ps -ef | egrep &amp;apos;nginx:\s*(worker|master)\s*process&amp;apos; | wc -l`&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if [ $&amp;#123;nginx_is_run&amp;#125; -gt 0 ];then&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        echo &amp;quot;nginx already running....&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        exit 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    fi&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    echo -n $&amp;quot;Starting $prog: &amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    daemon $nginxd -c $&amp;#123;nginx_config&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    RETVAL=$?&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    echo&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [ $RETVAL = 0 ] &amp;amp;&amp;amp; touch $&amp;#123;nginx_lock&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return $RETVAL&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# Stop nginx daemons functions.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;stop() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    echo -n $&amp;quot;Stopping $prog: &amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    killproc $nginxd&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    RETVAL=$?&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    echo&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [ $RETVAL = 0 ] &amp;amp;&amp;amp; rm -f $&amp;#123;nginx_lock&amp;#125; $&amp;#123;nginx_pid&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# Reload nginx config file&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;reload() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    echo -n $&amp;quot;Reloading $prog: &amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    #kill -HUP `cat $&amp;#123;nginx_pid&amp;#125;`&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    killproc $nginxd -HUP&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    RETVAL=$?&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    echo&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# See how we were called.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;case &amp;quot;$1&amp;quot; in&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    start)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        start&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    stop)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        stop&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    reload)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        reload&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    restart)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          stop&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        start&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    status)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        status $prog&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        RETVAL=$?&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    *)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        echo $&amp;quot;Usage: $prog &amp;#123;start|stop|restart|reload|status|help&amp;#125;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        exit 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;esac&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;Nginx启动提示找不到libpcre.so.1解决方法&lt;br&gt;如果是32位系统&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;ln -s /usr/local/lib/libpcre.so.1 /lib&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;如果是64位系统&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;ln -s /usr/local/lib/libpcre.so.1 /lib64&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;启动nginx&quot;&gt;&lt;a href=&quot;#启动nginx&quot; class=&quot;headerlink&quot; title=&quot;启动nginx&quot;&gt;&lt;/a&gt;启动nginx&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;# chmod u+x /etc/init.d/nginx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# chkconfig --add nginx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# chkconfig nginx on&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# service nginx start&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;正在启动 nginx：                                           [确定]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# service nginx status&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;nginx (pid 26500) 正在运行...&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;查看nginx的日志 错误日志logs/error.log 看是否有问题&lt;/p&gt;
&lt;h3 id=&quot;其他&quot;&gt;&lt;a href=&quot;#其他&quot; class=&quot;headerlink&quot; title=&quot;其他&quot;&gt;&lt;/a&gt;其他&lt;/h3&gt;&lt;h4 id=&quot;启动nginx，tracker和storage&quot;&gt;&lt;a href=&quot;#启动nginx，tracker和storage&quot; class=&quot;headerlink&quot; title=&quot;启动nginx，tracker和storage&quot;&gt;&lt;/a&gt;启动nginx，tracker和storage&lt;/h4&gt;&lt;p&gt;重启tracker：&lt;br&gt;/usr/local/bin/restart.sh /usr/local/bin/fdfs_trackerd /etc/fdfs/tracker.conf&lt;br&gt;重启storage：&lt;br&gt;/usr/local/bin/restart.sh /usr/local/bin/fdfs_storaged /etc/fdfs/storage.conf&lt;br&gt;启动nginx：&lt;br&gt;/usr/local/nginx/sbin/nginx&lt;br&gt;检查nginx状态：&lt;br&gt;/usr/local/nginx/sbin/nginx -t&lt;br&gt;重启nginx：&lt;br&gt;/usr/local/nginx/sbin/nginx -s reload&lt;/p&gt;
&lt;h4 id=&quot;tracker运行&quot;&gt;&lt;a href=&quot;#tracker运行&quot; class=&quot;headerlink&quot; title=&quot;tracker运行&quot;&gt;&lt;/a&gt;tracker运行&lt;/h4&gt;&lt;p&gt;直接使用 fdfs_trackerd 来启动tracker进程，然后使用netstat 查看端口是否起来。&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[root@tracker fdfs]# fdfs_trackerd /etc/fdfs/tracker.conf restart&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@tracker fdfs]# netstat -antp | grep trackerd&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tcp        0      0 0.0.0.0:22122               0.0.0.0:*                   LISTEN      14520/fdfs_trackerd &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@tracker fdfs]#&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h4 id=&quot;storage运行&quot;&gt;&lt;a href=&quot;#storage运行&quot; class=&quot;headerlink&quot; title=&quot;storage运行&quot;&gt;&lt;/a&gt;storage运行&lt;/h4&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;# fdfs_storaged /etc/fdfs/storage.conf restart&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;查看端口是否起来&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# netstat -antp | grep storage&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tcp        0      0 0.0.0.0:23000               0.0.0.0:*                   LISTEN      10316/fdfs_storaged&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;也可以以下命令来监控服务器的状态&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;# fdfs_monitor /etc/fdfs/client.conf&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;看到ACTIVE,就说明已经成功注册到了tracker。&lt;/p&gt;
&lt;h4 id=&quot;开机启动&quot;&gt;&lt;a href=&quot;#开机启动&quot; class=&quot;headerlink&quot; title=&quot;开机启动&quot;&gt;&lt;/a&gt;开机启动&lt;/h4&gt;&lt;p&gt;设置tracker开机自动启动&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[root@tracker tracker]# echo &amp;quot;/usr/bin/fdfs_trackerd /etc/fdfs/tracker.conf restart&amp;quot; &amp;gt;&amp;gt; /etc/rc.local&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@tracker tracker]# cat /etc/rc.local&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#!/bin/sh&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# This script will be executed *after* all the other init scripts.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# You can put your own initialization stuff in here if you don&amp;apos;t&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# want to do the full Sys V style init stuff.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;touch /var/lock/subsys/local&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/usr/bin/fdfs_trackerd /etc/fdfs/tracker.conf restart&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@tracker tracker]#&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;设置storage开机启动&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[root@server1 fdfs]# echo &amp;quot;/usr/bin/fdfs_storaged /etc/fdfs/storage.conf restart&amp;quot; &amp;gt;&amp;gt; /etc/rc.local&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@server1 fdfs]# cat /etc/rc.local&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#!/bin/sh&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# This script will be executed *after* all the other init scripts.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# You can put your own initialization stuff in here if you don&amp;apos;t&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# want to do the full Sys V style init stuff.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;touch /var/lock/subsys/local&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/usr/bin/fdfs_storaged /etc/fdfs/storage.conf restart&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;使用client测试文件上传&quot;&gt;&lt;a href=&quot;#使用client测试文件上传&quot; class=&quot;headerlink&quot; title=&quot;使用client测试文件上传&quot;&gt;&lt;/a&gt;使用client测试文件上传&lt;/h3&gt;&lt;p&gt;先配置一下client&lt;br&gt;vi /etc/fdfs/client.conf&lt;br&gt;保证一下配置：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;base_path=/home/yuqing/fastdfs&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tracker_server=192.168.1.134:22122&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;http.tracker_server_port=8080&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;vi test.txt&lt;/p&gt;
&lt;p&gt;/usr/local/bin/fdfs_test /etc/fdfs/client.conf  upload  test.txt&lt;br&gt;得到：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;This is FastDFS client test program v4.06&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Copyright (C) 2008, Happy Fish / YuQing&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;FastDFS may be copied only under the terms of the GNU General&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Public License V3, which may be found in the FastDFS source kit.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Please visit the FastDFS Home Page http://www.csource.org/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;for more detail.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[2016-07-06 07:31:57] DEBUG - base_path=/home/yuqing/fastdfs, connect_timeout=30, network_timeout=60, tracker_server_count=1, anti_steal_token=0, anti_steal_secret_key length=0, use_connection_pool=0, g_connection_pool_max_idle_time=3600s, use_storage_id=0, storage server id count: 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tracker_query_storage_store_list_without_group:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        server 1. group_name=, ip_addr=192.168.1.134, port=23000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;group_name=group1, ip_addr=192.168.1.134, port=23000&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;storage_upload_by_filename&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;group_name=group1, remote_filename=M00/00/00/wKgBhld9Fl2ATSOYAAAAB9mqc8s085.txt&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;source ip address: 192.168.1.134&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;file timestamp=2016-07-06 07:31:57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;file size=7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;file crc32=3651826635&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;file url: http://192.168.1.134:8080/group1/M00/00/00/wKgBhld9Fl2ATSOYAAAAB9mqc8s085.txt&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;storage_upload_slave_by_filename&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;group_name=group1, remote_filename=M00/00/00/wKgBhld9Fl2ATSOYAAAAB9mqc8s085_big.txt&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;source ip address: 192.168.1.134&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;file timestamp=2016-07-06 07:31:57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;file size=7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;file crc32=3651826635&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;file url: http://192.168.1.134:8080/group1/M00/00/00/wKgBhld9Fl2ATSOYAAAAB9mqc8s085_big.txt&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[root@localhost yihua]# This is FastDFS client test program v4.06&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-bash: This: command not found&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Copyright (C) 2008, Happy Fish / YuQing&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;在浏览器打开&lt;a href=&quot;http://192.168.1.134:8080/group1/M00/00/00/wKgBhld9Fl2ATSOYAAAAB9mqc8s085.txt&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://192.168.1.134:8080/group1/M00/00/00/wKgBhld9Fl2ATSOYAAAAB9mqc8s085.txt&lt;/a&gt;&lt;br&gt;可以看见你的文件。那么就成功了。&lt;/p&gt;
&lt;p&gt;done.&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;在单服务器上安装部署FastDFS-Nginx&quot;&gt;&lt;a href=&quot;#在单服务器上安装部署FastDFS-Nginx&quot; class=&quot;headerlink&quot; title=&quot;在单服务器上安装部署FastDFS+Nginx&quot;&gt;&lt;/a&gt;在单服务器上安装部署FastDFS
    
    </summary>
    
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
      <category term="centos" scheme="http://yoursite.com/tags/centos/"/>
    
      <category term="FastDFS" scheme="http://yoursite.com/tags/FastDFS/"/>
    
      <category term="Nginx" scheme="http://yoursite.com/tags/Nginx/"/>
    
      <category term="图片服务器" scheme="http://yoursite.com/tags/%E5%9B%BE%E7%89%87%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
  </entry>
  
  <entry>
    <title>项目管理建议</title>
    <link href="http://yoursite.com/2016/07/01/%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%BB%BA%E8%AE%AE/"/>
    <id>http://yoursite.com/2016/07/01/项目管理建议/</id>
    <published>2016-07-01T11:14:00.000Z</published>
    <updated>2016-07-07T14:04:19.329Z</updated>
    
    <content type="html">&lt;h1 id=&quot;对项目管理制度的一些看法和建议&quot;&gt;&lt;a href=&quot;#对项目管理制度的一些看法和建议&quot; class=&quot;headerlink&quot; title=&quot;对项目管理制度的一些看法和建议&quot;&gt;&lt;/a&gt;对项目管理制度的一些看法和建议&lt;/h1&gt;&lt;h2 id=&quot;当前存在的问题&quot;&gt;&lt;a href=&quot;#当前存在的问题&quot; class=&quot;headerlink&quot; title=&quot;当前存在的问题&quot;&gt;&lt;/a&gt;当前存在的问题&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;技术工程师反映，技术人员与业务隔离，技术人员难以熟悉第一手业务需求，对工程师开发出契合业务部分需求的产品造成一定的理解障碍。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;安卓、iOS、H5、后端、测试等各部门分而治之，缺乏一个强而有力的统筹推进，虽然增加了项目经理角色，但目前这个角色只能在各部门之间协调，仍然难以有力推动各部门按时按量完成进度。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;从业务到产品到开发到测试上线，这个流程还可以有优化的地方。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;分析和改进建议&quot;&gt;&lt;a href=&quot;#分析和改进建议&quot; class=&quot;headerlink&quot; title=&quot;分析和改进建议&quot;&gt;&lt;/a&gt;分析和改进建议&lt;/h2&gt;&lt;h3 id=&quot;针对问题1。&quot;&gt;&lt;a href=&quot;#针对问题1。&quot; class=&quot;headerlink&quot; title=&quot;针对问题1。&quot;&gt;&lt;/a&gt;针对问题1。&lt;/h3&gt;&lt;p&gt;使用尝试让项目经理或者技术经理在产需求研和产品评审阶段就参与介入，能够一定程度的和业务部分做到沟通，让技术人员更熟悉业务。即使只是旁听也好&lt;/p&gt;
&lt;h3 id=&quot;针对问题2。&quot;&gt;&lt;a href=&quot;#针对问题2。&quot; class=&quot;headerlink&quot; title=&quot;针对问题2。&quot;&gt;&lt;/a&gt;针对问题2。&lt;/h3&gt;&lt;p&gt;程序界有一句话，“没有完美的模型，但有一些能用。”&lt;br&gt;既然目前公司的情况是各部分分而治之，各施其职，那么可以考虑这样一个构思，产品对业务负责，提供产品的产出;测试则对产品负责，提供项目和模块完成情况；技术经理对项目经理负责，提供项目模块开发时间评估，以及开发产出；各开发工程师对技术经理负责，按时按量完成技术经理制定的模块开发计划。而项目经理则对项目的进度和协调负责，应该要有渠道能对接所有相关部门，跟进项目的进度，协调各方遇到的问题，并协助解决。&lt;br&gt;&lt;strong&gt;这样，明确各部门应该对谁负责，各部门遇到项目开发相关问题，也就能明确的找到相应的人员，得到反馈，部门之间也能够相互推动。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;这里推荐使用一个团队协作管理的工具：“Worktile”。&lt;/strong&gt;&lt;br&gt;Worktile可以在一个看板中看到所有在做、已完成、在测试等等所有流程中的任务和完成情况。&lt;br&gt;例如，技术经理可以列出所有需要完成的模块和任务，为之分配负责人。负责人开发完成后，勾选完成，管理人员就可以拖动任务进入测试流程。&lt;br&gt;如此一个可视化简单的团队协作管理。&lt;br&gt;当然这个功能，像禅道也能部分实现。但是禅道的这个功能并不好用，从实践经验来说，使用的人积极性并不高。而Worktile这类工具如果推动成功，开发的管理效率将会得到提高。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;各状态任务完成情况一览：&lt;/strong&gt;&lt;br&gt;&lt;img src=&quot;/images/project-002.jpg&quot; alt=&quot;&quot;&gt;&lt;br&gt;&lt;strong&gt;完成任务，推动到另一状态：&lt;/strong&gt;&lt;br&gt;&lt;img src=&quot;/images/project-003.png&quot; alt=&quot;&quot;&gt;&lt;br&gt;&lt;strong&gt;报表：&lt;/strong&gt;&lt;br&gt;&lt;img src=&quot;/images/project-004.jpg&quot; alt=&quot;&quot;&gt;&lt;br&gt;&lt;strong&gt;团队日历：每个时间点要完成的任务也会在此显示&lt;/strong&gt;&lt;br&gt;&lt;img src=&quot;/images/project-005.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;针对问题3&quot;&gt;&lt;a href=&quot;#针对问题3&quot; class=&quot;headerlink&quot; title=&quot;针对问题3.&quot;&gt;&lt;/a&gt;针对问题3.&lt;/h3&gt;&lt;p&gt;以门店收银机为例，发现存在一些流程上的问题。&lt;br&gt;&lt;strong&gt;首先，说接口，有两个问题。&lt;/strong&gt;&lt;br&gt;一，客户端和服务端接口文档，用的是word文档沟通，各个人员直接相互传递，很可能导致相互之间接口文档不同步，也就会造成开发期间关于接口的一些扯皮。&lt;br&gt;二，虽然接口文档有了，但是客户端还是要等服务端出接口后，才能进行接口接入后的相关开发，这样前端的进度就要依赖于后端的产出。&lt;br&gt;既然有这样的问题，那么有没有改进办法呢？有的，这里推荐使用阿里开源的“RAP”接口管理工具进行接口管理。&lt;br&gt;RAP对我们接口开发的帮助有：&lt;br&gt;1）可视化结构化的接口编辑和管理。这样接口只有服务器上的一份，并且管理简单。&lt;br&gt;2）生成Mock数据、校验真实接口的正确性。有了Mock功能，前端可以在后端提供接口之前，利用rap提供的模拟接口数据，提前进行接口接入的开发，提高前端开发速度。最重要的是，前后端接口开发解耦。&lt;br&gt;&lt;img src=&quot;/images/project-001.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;其次，说说测试和螺旋式开发。&lt;/strong&gt;&lt;br&gt;测试本身是一个发现细节的过程，有些问题测试到细节的地方，就会出现值得推敲和不断调试的情况。而我们项目留给测试的时间太少了。而前期，没完成之前，测试在等待开发，同时，最后所有模块大致完成才提测，又一股脑挤在后期测试和迭代，时间难免太紧，很容易导致进度延误。&lt;br&gt;&lt;strong&gt;这里的建议是，开发应该在项目开始时就梳理出模块间的依赖情况，前后端协调好应该先开发哪些模块，只要有一个模块开发完成，就马上提测。&lt;/strong&gt;如此让测试尽早介入测试，达到项目螺旋式迭代推荐的目的。同时，也能让测试的时间合理分配，避免延误。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;对项目管理制度的一些看法和建议&quot;&gt;&lt;a href=&quot;#对项目管理制度的一些看法和建议&quot; class=&quot;headerlink&quot; title=&quot;对项目管理制度的一些看法和建议&quot;&gt;&lt;/a&gt;对项目管理制度的一些看法和建议&lt;/h1&gt;&lt;h2 id=&quot;当前存在的问题&quot;&gt;&lt;a h
    
    </summary>
    
    
      <category term="RAP" scheme="http://yoursite.com/tags/RAP/"/>
    
      <category term="manager" scheme="http://yoursite.com/tags/manager/"/>
    
      <category term="项目管理" scheme="http://yoursite.com/tags/%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86/"/>
    
      <category term="Worktile" scheme="http://yoursite.com/tags/Worktile/"/>
    
  </entry>
  
  <entry>
    <title>[api_version]4种在springmvc中进行api版本控制的处理方法</title>
    <link href="http://yoursite.com/2016/06/28/api-version-4%E7%A7%8D%E5%9C%A8springmvc%E4%B8%AD%E8%BF%9B%E8%A1%8Capi%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6%E7%9A%84%E5%A4%84%E7%90%86%E6%96%B9%E6%B3%95/"/>
    <id>http://yoursite.com/2016/06/28/api-version-4种在springmvc中进行api版本控制的处理方法/</id>
    <published>2016-06-28T07:31:54.000Z</published>
    <updated>2016-06-30T15:56:59.038Z</updated>
    
    <content type="html">&lt;p&gt;&lt;a href=&quot;https://github.com/mindhaq/restapi-versioning-spring.git&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/mindhaq/restapi-versioning-spring.git&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://github.com/augusto/restVersioning.git&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/augusto/restVersioning.git&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;这两个git项目里提供了4种在springmvc中进行api版本控制的处理方法，你们看怎么样，能否不使用冗余部署的方式。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;/api/v1/xxx&lt;br&gt;controller中的方法注解写法：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;@ResponseBody&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;@RequestMapping(value = &amp;quot;/apiurl/&amp;#123;version&amp;#125;/hello&amp;quot;, method = GET, produces = APPLICATION_JSON_VALUE)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;public Hello sayHelloWorldUrl(@PathVariable final ValidVersion version) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return new Hello();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;/api/xxx&lt;br&gt;在header中添加”X-API-Version”:”v1”来进行版本请求的区别&lt;br&gt;controller中的方法注解写法：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;@ResponseBody&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;@RequestMapping(value = &amp;quot;/apiheader/hello&amp;quot;, method = GET, produces = APPLICATION_JSON_VALUE)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;public Hello sayHelloWorldHeader(@RequestHeader(&amp;quot;X-API-Version&amp;quot;) final ValidVersion version) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return new Hello();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;/api/xxx&lt;br&gt;在header中添加Accept: “application/vnd.company.app-v1+json”来进行版本区别&lt;br&gt;controller中的方法注解写法：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;@ResponseBody&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;@RequestMapping(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    value = &amp;quot;/apiaccept/hello&amp;quot;, method = GET,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    produces = &amp;#123;&amp;quot;application/vnd.company.app-v1+json&amp;quot;, &amp;quot;application/vnd.company.app-v2+json&amp;quot;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;/api/xxx&lt;br&gt;在header中添加Accept: “application/vnd.company.app-v1+json”来进行版本区别&lt;br&gt;controller写法：&lt;br&gt;```&lt;br&gt;@Controller&lt;br&gt;@VersionedResource(media = “application/vnd.app.resource”)&lt;br&gt;public class TestController {&lt;/p&gt;
&lt;p&gt; @RequestMapping(value = {“/resource”}, method = RequestMethod.GET)&lt;br&gt; @VersionedResource(from = “1.0”, to = “1.0”)&lt;br&gt; @ResponseBody&lt;br&gt; public Resource getResource_v1() {&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;return new Resource(&amp;quot;1.0&amp;quot;);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt; }&lt;/p&gt;
&lt;p&gt; @RequestMapping(value = {“/resource”}, method = RequestMethod.GET)&lt;br&gt; @VersionedResource(from = “2.0”)&lt;br&gt; @ResponseBody&lt;br&gt; public Resource getResource_v2_onwards() {&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;return new Resource(&amp;quot;2.0&amp;quot;);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt; }&lt;br&gt;}&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;https://github.com/mindhaq/restapi-versioning-spring.git&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/mindhaq/restapi-vers
    
    </summary>
    
    
      <category term="java" scheme="http://yoursite.com/tags/java/"/>
    
      <category term="api_verion" scheme="http://yoursite.com/tags/api-verion/"/>
    
      <category term="spring mvc" scheme="http://yoursite.com/tags/spring-mvc/"/>
    
  </entry>
  
  <entry>
    <title>[dev][collect][2016-06-06]collect-of-im-netty-android-etc</title>
    <link href="http://yoursite.com/2016/06/06/dev-collect-2016-06-06-collect-of-im-netty-android-etc/"/>
    <id>http://yoursite.com/2016/06/06/dev-collect-2016-06-06-collect-of-im-netty-android-etc/</id>
    <published>2016-06-06T09:42:22.000Z</published>
    <updated>2016-06-06T13:07:42.450Z</updated>
    
    <content type="html">&lt;p&gt;此集合[dev][collect]汇总开发资源.&lt;br&gt;资源含文章，git code等等..&lt;/p&gt;
&lt;h3 id=&quot;2016-06-06&quot;&gt;&lt;a href=&quot;#2016-06-06&quot; class=&quot;headerlink&quot; title=&quot;2016-06-06&quot;&gt;&lt;/a&gt;2016-06-06&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;一套仿 微信 IM系统 基于apache mina&lt;br&gt;&lt;a href=&quot;http://my.oschina.net/u/1167637/blog/411312&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://my.oschina.net/u/1167637/blog/411312&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;socketio 服务器推送&lt;br&gt;&lt;a href=&quot;http://blog.csdn.net/xtayfjpk/article/details/40948409&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://blog.csdn.net/xtayfjpk/article/details/40948409&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;开放源码,基于springMVC+springSecurity3.x+Mybaits3.x的权限系统,,支持开源&lt;br&gt;&lt;a href=&quot;https://github.com/caprice/lanyuan&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/caprice/lanyuan&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Simple asynchronous non blocking chat server/client based on Netty 4&lt;br&gt;&lt;a href=&quot;https://github.com/caprice/nettychat&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/caprice/nettychat&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://github.com/YihuaWanglv/nettychat&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/YihuaWanglv/nettychat&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;[5][android]A High Copy WeChat ,SNS APP (高仿微信)&lt;br&gt;&lt;a href=&quot;https://github.com/YihuaWanglv/wechat&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/YihuaWanglv/wechat&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;一个Android开发者博客&lt;br&gt;&lt;a href=&quot;http://blog.csdn.net/finddreams&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://blog.csdn.net/finddreams&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;案例剖析：从0开始搭建一个微服务的持续交付系统&lt;br&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MzA5Nzc4OTA1Mw==&amp;amp;mid=2659597380&amp;amp;idx=1&amp;amp;sn=e0087759e6b65df0ba30126c1e3af915&amp;amp;scene=0#wechat_redirect&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://mp.weixin.qq.com/s?__biz=MzA5Nzc4OTA1Mw==&amp;amp;mid=2659597380&amp;amp;idx=1&amp;amp;sn=e0087759e6b65df0ba30126c1e3af915&amp;amp;scene=0#wechat_redirect&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;[5][android]这是一个可用于Android快速开发的框架，集成了很多项目中通用的东西，免去重复造轮子的麻烦，直接下载来了，修改一下就可以做为基础的框架进行开发，提高开发速度，适合当前移动互联网时代敏捷快速开发的节奏&lt;br&gt;&lt;a href=&quot;https://github.com/YihuaWanglv/Android_BaseLib&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/YihuaWanglv/Android_BaseLib&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;使用Netty实现IMServer，方便的Entity解码编码机制，融合到二进制协议中&lt;br&gt;&lt;a href=&quot;https://github.com/YihuaWanglv/netty-chat&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/YihuaWanglv/netty-chat&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;仿淘宝的B2C商城项目&lt;br&gt;页面用的jsp，稍显陈旧&lt;br&gt;&lt;a href=&quot;https://github.com/YihuaWanglv/B2CWeb&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/YihuaWanglv/B2CWeb&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;JavaEE项目开发脚手架&lt;br&gt;&lt;a href=&quot;https://github.com/YihuaWanglv/es&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/YihuaWanglv/es&lt;/a&gt;&lt;br&gt;后端:&lt;br&gt;IoC容器 spring&lt;br&gt;web框架 springmvc&lt;br&gt;orm框架 hibernate + spring data jpa&lt;br&gt;安全框架 shiro&lt;br&gt;验证框架 hibernate validator&lt;br&gt;任务调度框架 quartz&lt;br&gt;缓存 ehcache&lt;br&gt;数据源 druid&lt;br&gt;日志 slf4j+logback&lt;br&gt;Json fastjson&lt;br&gt;日期美化 prettytime&lt;br&gt;servlet 3.0(需要支持servlet3的servlet容器，如tomcat7)&lt;br&gt;jcaptcha 验证码&lt;br&gt;jsp 模板视图&lt;br&gt;前端:&lt;br&gt;jquery js框架&lt;br&gt;jquery-ui-bootstrap界面框架&lt;br&gt;font-wesome 字体/图标框架&lt;br&gt;jquery Validation Engine 验证框架（配合spring的验证框架，页面验证简化不少）&lt;br&gt;kindeditor 编辑器&lt;br&gt;nicescroll 漂亮的滚动条&lt;br&gt;zTree 树框架&lt;br&gt;jquery blockUI 弹出框/遮罩框架&lt;br&gt;jquery-fileupload 文件上传&lt;br&gt;bootstrap-datatimepicker 日历选择&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;[5][android]Collect and classify android open source projects&lt;br&gt;&lt;a href=&quot;https://github.com/YihuaWanglv/android-open-project&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/YihuaWanglv/android-open-project&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Blog avec Spring MVC + spring DATA + mongodb + angularjs&lt;br&gt;&lt;a href=&quot;https://github.com/YihuaWanglv/blog_java&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/YihuaWanglv/blog_java&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;dianping-api-samples&lt;br&gt;&lt;a href=&quot;https://github.com/YihuaWanglv/dianping-open-sdk&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/YihuaWanglv/dianping-open-sdk&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;JeeSite 是一个企业信息管理系统基础框架，Java EE（J2EE）快速开发框架，使用经典技术组合（Spring、Spring MVC、Apache Shiro、Hibernate、Bootstrap UI），包括核心模块如：组织机构、用户、权限授权、内容管理、工作流等。&lt;br&gt;&lt;a href=&quot;https://github.com/YihuaWanglv/jeesite&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/YihuaWanglv/jeesite&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Demos of Apache MINA User Guide《Apache MINA 2 用户指南》中文翻译，文中用到的例子源码 &lt;a href=&quot;https://github.com/waylau/apache-mina-2.x-user-guide&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/waylau/apache-mina-2.x-user-guide&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://github.com/waylau/apache-mina-2-user-guide-demos&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/waylau/apache-mina-2-user-guide-demos&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Spring Framework 4.x Reference Documentation 中文翻译&lt;br&gt;&lt;a href=&quot;https://www.gitbook.com/book/waylau/spring-framework-4-reference/details&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://www.gitbook.com/book/waylau/spring-framework-4-reference/details&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://github.com/waylau/spring-framework-4-reference&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/waylau/spring-framework-4-reference&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;免费的计算机编程类中文书籍&lt;br&gt;&lt;a href=&quot;https://github.com/YihuaWanglv/free-programming-books-zh_CN&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/YihuaWanglv/free-programming-books-zh_CN&lt;/a&gt;&lt;br&gt;网页版：&lt;br&gt;&lt;a href=&quot;http://siberiawolf.com/free_programming/index.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://siberiawolf.com/free_programming/index.html&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;一个合格的程序员应该读过哪些书&lt;br&gt;&lt;a href=&quot;http://justjavac.com/other/2012/05/15/qualified-programmer-should-read-what-books.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://justjavac.com/other/2012/05/15/qualified-programmer-should-read-what-books.html&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Google 全球 IP 地址库&lt;br&gt;&lt;a href=&quot;https://github.com/justjavac/Google-IPs&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/justjavac/Google-IPs&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;一份关于“资料汇总”的汇总&lt;br&gt;&lt;a href=&quot;https://github.com/YihuaWanglv/awesome-awesomeness-zh_CN&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/YihuaWanglv/awesome-awesomeness-zh_CN&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Freely available programming books&lt;br&gt;&lt;a href=&quot;https://github.com/YihuaWanglv/free-programming-books&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/YihuaWanglv/free-programming-books&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;RESTful API 设计参考文献列表，可帮助你更加彻底的了解REST风格的接口设计&lt;br&gt;&lt;a href=&quot;https://github.com/aisuhua/restful-api-design-references&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/aisuhua/restful-api-design-references&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ssential Netty in Action 《Netty 实战(精髓)》&lt;br&gt;&lt;a href=&quot;https://github.com/waylau/essential-netty-in-action&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/waylau/essential-netty-in-action&lt;/a&gt;&lt;br&gt;gitbook：&lt;br&gt;&lt;a href=&quot;http://waylau.com/essential-netty-in-action/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://waylau.com/essential-netty-in-action/&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Gradle 2 User Guide 中文翻译《Gradle 2 用户指南》&lt;br&gt;&lt;a href=&quot;https://github.com/waylau/Gradle-2-User-Guide&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/waylau/Gradle-2-User-Guide&lt;/a&gt;&lt;br&gt;gitbook：&lt;br&gt;&lt;a href=&quot;https://www.gitbook.com/book/waylau/gradle-2-user-guide/details&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://www.gitbook.com/book/waylau/gradle-2-user-guide/details&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Netty 4.x User Guide 中文翻译《Netty 4.x 用户指南》&lt;br&gt;&lt;a href=&quot;https://github.com/waylau/netty-4-user-guide&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/waylau/netty-4-user-guide&lt;/a&gt;&lt;br&gt;gitbook：&lt;br&gt;&lt;a href=&quot;http://waylau.com/netty-4-user-guide/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://waylau.com/netty-4-user-guide/&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;这是一个整理即时通讯（IM）和社交系统（SNS）优秀开源项目的文档，项目上传github欢迎提交更新&lt;br&gt;&lt;a href=&quot;https://github.com/YihuaWanglv/Perfect_IM_SNS&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/YihuaWanglv/Perfect_IM_SNS&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;基于位置信息，空间时间结合的社交与分享的应用&lt;br&gt;&lt;a href=&quot;https://github.com/YihuaWanglv/Tuyi&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/YihuaWanglv/Tuyi&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;SYTeamApp：基于环信平台进行开发，旨在打造的高效团队沟通的移动客户端，供企业内部协作使用、适应移动办公需要，提升企业沟通协同效率，增强企业办公管理效率。（当前仅实现了用户登入登出功能、通讯功能、投票功能。）&lt;br&gt;&lt;a href=&quot;https://github.com/YihuaWanglv/SYTeamApp&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/YihuaWanglv/SYTeamApp&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;MeifuGO：An open source android app by using easemob IM SDK&lt;br&gt;&lt;a href=&quot;https://github.com/YihuaWanglv/MeifuGO&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/YihuaWanglv/MeifuGO&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;fangyuanshili：环信SDK,IM,geohash,lbs&lt;br&gt;&lt;a href=&quot;https://github.com/YihuaWanglv/fangyuanshili&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/YihuaWanglv/fangyuanshili&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;zaina：该项目是改编自环信即时通讯云的demo改编&lt;br&gt;&lt;a href=&quot;https://github.com/YihuaWanglv/zaina&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/YihuaWanglv/zaina&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;dianhua：基于react native 和 环信的实时通话的免费店话&lt;br&gt;&lt;a href=&quot;https://github.com/YihuaWanglv/dianhua&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/YihuaWanglv/dianhua&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Baby：一个私密社交APP&lt;br&gt;&lt;a href=&quot;https://github.com/YihuaWanglv/Baby&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/YihuaWanglv/Baby&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;MVPCommon：一个集成了众多开源项目的Android MVP框架以及应用搭建，全程博客更新。&lt;br&gt;a common Architecture and project build with blogs releasing based on MVP，integrates many Open Source Projects ,to make your developing quicker and easier.&lt;br&gt;&lt;a href=&quot;https://github.com/YihuaWanglv/MVPCommon&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/YihuaWanglv/MVPCommon&lt;/a&gt;&lt;br&gt;从零开始搭建android框架系列：&lt;br&gt;&lt;a href=&quot;http://www.jianshu.com/notebooks/3767449/latest&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.jianshu.com/notebooks/3767449/latest&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;learnCloud：&lt;br&gt;和应用服务器、存储服务器说再见&lt;br&gt;再也不用租服务器，也不用写后端代码了。LeanCloud 提供一站式后端云服务，从数据存储、实时聊天、消息推送到移动统计，涵盖应用开发的多方面后端需求。&lt;br&gt;&lt;a href=&quot;https://leancloud.cn/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://leancloud.cn/&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;不容错过，最全的安卓架构合集【从零开始搭建android框架系列（2）】&lt;br&gt;&lt;a href=&quot;http://www.jianshu.com/p/1f21e1d375aa&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.jianshu.com/p/1f21e1d375aa&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;安卓架构文章合集（a collection of android Architecture）&lt;br&gt;&lt;a href=&quot;https://github.com/YihuaWanglv/AndroidArchitectureCollection&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/YihuaWanglv/AndroidArchitectureCollection&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;此集合[dev][collect]汇总开发资源.&lt;br&gt;资源含文章，git code等等..&lt;/p&gt;
&lt;h3 id=&quot;2016-06-06&quot;&gt;&lt;a href=&quot;#2016-06-06&quot; class=&quot;headerlink&quot; title=&quot;2016-06-06&quot;&gt;&lt;/a&gt;20
    
    </summary>
    
    
      <category term="collect" scheme="http://yoursite.com/tags/collect/"/>
    
      <category term="dev" scheme="http://yoursite.com/tags/dev/"/>
    
      <category term="post" scheme="http://yoursite.com/tags/post/"/>
    
      <category term="git" scheme="http://yoursite.com/tags/git/"/>
    
      <category term="resouce" scheme="http://yoursite.com/tags/resouce/"/>
    
  </entry>
  
  <entry>
    <title>[git]git分支使用和管理</title>
    <link href="http://yoursite.com/2016/06/06/git-git%E5%88%86%E6%94%AF%E4%BD%BF%E7%94%A8%E5%92%8C%E7%AE%A1%E7%90%86/"/>
    <id>http://yoursite.com/2016/06/06/git-git分支使用和管理/</id>
    <published>2016-06-06T09:37:36.000Z</published>
    <updated>2016-06-06T13:06:22.607Z</updated>
    
    <content type="html">&lt;h2 id=&quot;git分支常用命令&quot;&gt;&lt;a href=&quot;#git分支常用命令&quot; class=&quot;headerlink&quot; title=&quot;git分支常用命令&quot;&gt;&lt;/a&gt;git分支常用命令&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;从master创建dev分支，并checkout dev分支：&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git checkout -b dev&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;此命令相当于：&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git branch dev&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git checkout dev&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;回到master，合并dev的更改到master：&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git checkout master&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git merge dev&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;合并后删除dev分支：&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git branch -d dev&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;如果直接用git merge dev合并分支，git使用的是fast forward的模式，并不会留下commit历史，如果想要留下commit历史，就要加上--no-ff参数，并使用-m添加commit描述&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git merge --no-ff -m &amp;quot;merge with no-ff&amp;quot; dev&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;保存临时状态&quot;&gt;&lt;a href=&quot;#保存临时状态&quot; class=&quot;headerlink&quot; title=&quot;保存临时状态&quot;&gt;&lt;/a&gt;保存临时状态&lt;/h2&gt;&lt;p&gt;当你正在dev分支进行开发，还没有开发完成能提交，此时突然有一个线上版本的bug要紧急修复，这个时候你就需要用到git stash功能，保存正在开发的dev分支的状态&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;保存当前开发状态：&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git stash&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;查看当前已保存的stash列表：&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git stash list&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;取出之前保存的stash状态：&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git stash pop&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;多人协作的工作模式&quot;&gt;&lt;a href=&quot;#多人协作的工作模式&quot; class=&quot;headerlink&quot; title=&quot;多人协作的工作模式&quot;&gt;&lt;/a&gt;多人协作的工作模式&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;多人协作的工作模式通常是这样：&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;首先，可以试图用git push origin branch-name推送自己的修改；&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;如果推送失败，则因为远程分支比你的本地更新，需要先用git pull试图合并；&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;如果合并有冲突，则解决冲突，并在本地提交；&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;没有冲突或者解决掉冲突后，再用git push origin branch-name推送就能成功！&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;如果git pull提示“no tracking information”，则说明本地分支和远程分支的链接关系没有创建，用命令git branch --set-upstream branch-name origin/branch-name。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;这就是多人协作的工作模式，一旦熟悉了，就非常简单。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;小结&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;查看远程库信息，使用git remote -v；&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;本地新建的分支如果不推送到远程，对其他人就是不可见的；&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;从本地推送分支，使用git push origin branch-name，如果推送失败，先用git pull抓取远程的新提交；&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;在本地创建和远程分支对应的分支，使用git checkout -b branch-name origin/branch-name，本地和远程分支的名称最好一致；&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;建立本地分支和远程分支的关联，使用git branch --set-upstream branch-name origin/branch-name；&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;从远程抓取分支，使用git pull，如果有冲突，要先处理冲突。&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;git分支常用命令&quot;&gt;&lt;a href=&quot;#git分支常用命令&quot; class=&quot;headerlink&quot; title=&quot;git分支常用命令&quot;&gt;&lt;/a&gt;git分支常用命令&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;t
    
    </summary>
    
    
      <category term="git" scheme="http://yoursite.com/tags/git/"/>
    
      <category term="branch" scheme="http://yoursite.com/tags/branch/"/>
    
      <category term="版本控制" scheme="http://yoursite.com/tags/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/"/>
    
      <category term="分支管理" scheme="http://yoursite.com/tags/%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>Windows下开启React-Native征途</title>
    <link href="http://yoursite.com/2016/06/04/Windows%E4%B8%8B%E5%BC%80%E5%90%AFReact-Native%E5%BE%81%E9%80%94/"/>
    <id>http://yoursite.com/2016/06/04/Windows下开启React-Native征途/</id>
    <published>2016-06-04T01:55:48.000Z</published>
    <updated>2016-06-04T02:26:01.845Z</updated>
    
    <content type="html">&lt;p&gt;我们的目标是星辰大海（说白了就是同一个东西咱不想Android做一份，iOS又做一份），现在我们要开启React-Native的征途（在Windows下）。&lt;br&gt;不过说出来你可能不太相信，这故事的开头，来的并没有想象中的困难。&lt;/p&gt;
&lt;p&gt;以下是过程：&lt;/p&gt;
&lt;h2 id=&quot;1-安装Nodejs&quot;&gt;&lt;a href=&quot;#1-安装Nodejs&quot; class=&quot;headerlink&quot; title=&quot;1. 安装Nodejs&quot;&gt;&lt;/a&gt;1. 安装Nodejs&lt;/h2&gt;&lt;p&gt;React Native要求是4.0以上。&lt;/p&gt;
&lt;h2 id=&quot;2-安装react-native-cli&quot;&gt;&lt;a href=&quot;#2-安装react-native-cli&quot; class=&quot;headerlink&quot; title=&quot;2. 安装react-native-cli&quot;&gt;&lt;/a&gt;2. 安装react-native-cli&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;npm install -g react-native-cli&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;3-初始化第一个项目&quot;&gt;&lt;a href=&quot;#3-初始化第一个项目&quot; class=&quot;headerlink&quot; title=&quot;3. 初始化第一个项目&quot;&gt;&lt;/a&gt;3. 初始化第一个项目&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;react-native init TestProject&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;初始化第一个测试Demo，init的时候可能需要一点时间. 伟大的目标值的那么些耐心的等待。&lt;/p&gt;
&lt;h2 id=&quot;4-设置环境变量&quot;&gt;&lt;a href=&quot;#4-设置环境变量&quot; class=&quot;headerlink&quot; title=&quot;4. 设置环境变量&quot;&gt;&lt;/a&gt;4. 设置环境变量&lt;/h2&gt;&lt;p&gt;设置环境变量ANDROID_HOME指向Android SDK的目录&lt;br&gt;eg:&lt;br&gt;&lt;img src=&quot;/images/react-001.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;5-安装Genymotion模拟器&quot;&gt;&lt;a href=&quot;#5-安装Genymotion模拟器&quot; class=&quot;headerlink&quot; title=&quot;5. 安装Genymotion模拟器&quot;&gt;&lt;/a&gt;5. 安装Genymotion模拟器&lt;/h2&gt;&lt;p&gt;Genymotion官网下载安装Genymotion模拟器，并创建Android emulator。&lt;br&gt;创建实例后，将得到如下画面：&lt;br&gt;&lt;img src=&quot;/images/react-002.png&quot; alt=&quot;&quot;&gt;&lt;br&gt;Genymotion运行Android模拟实例需要VirtualBox和AndroidSdk的支持。&lt;br&gt;安装Genymotion后默认的VirtualBox和AndroidSdk不好使，我通过Setting设置配置好自己本地的VirtualBox和AndroidSdk。&lt;br&gt;设置VirtualBox&lt;br&gt;&lt;img src=&quot;/images/react-003.png&quot; alt=&quot;&quot;&gt;&lt;br&gt;设置sdk&lt;br&gt;&lt;img src=&quot;/images/react-004.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;配置好后，就把模拟的Android实例启动起来放着吧。&lt;/p&gt;
&lt;h2 id=&quot;6-启动&quot;&gt;&lt;a href=&quot;#6-启动&quot; class=&quot;headerlink&quot; title=&quot;6. 启动&quot;&gt;&lt;/a&gt;6. 启动&lt;/h2&gt;&lt;h3 id=&quot;1-启动React-Native-Server&quot;&gt;&lt;a href=&quot;#1-启动React-Native-Server&quot; class=&quot;headerlink&quot; title=&quot;1-启动React Native Server&quot;&gt;&lt;/a&gt;1-启动React Native Server&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;react-native start&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img src=&quot;/images/react-005.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;2-开一个新的命令行终端-cmd-切换到项目目录安装APP&quot;&gt;&lt;a href=&quot;#2-开一个新的命令行终端-cmd-切换到项目目录安装APP&quot; class=&quot;headerlink&quot; title=&quot;2-开一个新的命令行终端(cmd), 切换到项目目录安装APP&quot;&gt;&lt;/a&gt;2-开一个新的命令行终端(cmd), 切换到项目目录安装APP&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;cd android&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;gradlew.bat installDebug&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;执行gradlew.bat installDebug时，需要先正常打开Genymotion模拟器，否则build 和 install会报错。&lt;br&gt;&lt;img src=&quot;/images/react-006.png&quot; alt=&quot;&quot;&gt;&lt;br&gt;安装成功后，在Genymotion里手动打开APP ，正常的话，你就可以看到React-Native的欢迎画面。&lt;br&gt;&lt;img src=&quot;/images/react-007.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;Windows下的React Native开发环境搭建 – done.&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;我们的目标是星辰大海（说白了就是同一个东西咱不想Android做一份，iOS又做一份），现在我们要开启React-Native的征途（在Windows下）。&lt;br&gt;不过说出来你可能不太相信，这故事的开头，来的并没有想象中的困难。&lt;/p&gt;
&lt;p&gt;以下是过程：&lt;/p&gt;
&lt;h2 
    
    </summary>
    
    
      <category term="react" scheme="http://yoursite.com/tags/react/"/>
    
      <category term="react-native" scheme="http://yoursite.com/tags/react-native/"/>
    
      <category term="nodejs" scheme="http://yoursite.com/tags/nodejs/"/>
    
      <category term="android" scheme="http://yoursite.com/tags/android/"/>
    
      <category term="windows" scheme="http://yoursite.com/tags/windows/"/>
    
  </entry>
  
  <entry>
    <title>[Jenkins自动化部署实践]Jenkins多环境部署git托管的springboot项目</title>
    <link href="http://yoursite.com/2016/06/01/Jenkins%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E5%AE%9E%E8%B7%B5-Jenkins%E5%A4%9A%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2git%E6%89%98%E7%AE%A1%E7%9A%84springboot%E9%A1%B9%E7%9B%AE/"/>
    <id>http://yoursite.com/2016/06/01/Jenkins自动化部署实践-Jenkins多环境部署git托管的springboot项目/</id>
    <published>2016-06-01T10:56:42.000Z</published>
    <updated>2016-06-01T14:09:14.708Z</updated>
    
    <content type="html">&lt;p&gt;[Jenkins自动化部署实践]Jenkins多环境部署git托管的springboot项目&lt;/p&gt;
&lt;h3 id=&quot;目标&quot;&gt;&lt;a href=&quot;#目标&quot; class=&quot;headerlink&quot; title=&quot;目标&quot;&gt;&lt;/a&gt;目标&lt;/h3&gt;&lt;h4 id=&quot;场景&quot;&gt;&lt;a href=&quot;#场景&quot; class=&quot;headerlink&quot; title=&quot;场景&quot;&gt;&lt;/a&gt;场景&lt;/h4&gt;&lt;p&gt;Jenkins部署在服务器192.168.1.119:8080.&lt;br&gt;有一个在git托管的springboot构建的web项目，项目有n个依赖的父模块，现在想要把这个项目部署到服务器192.168.1.134上.&lt;br&gt;现在，我们需要使用Jenkins自动化部署实现这个目标.&lt;/p&gt;
&lt;h4 id=&quot;为什么是springboot？&quot;&gt;&lt;a href=&quot;#为什么是springboot？&quot; class=&quot;headerlink&quot; title=&quot;为什么是springboot？&quot;&gt;&lt;/a&gt;为什么是springboot？&lt;/h4&gt;&lt;p&gt;Sprinboot允许项目使用内嵌的tomcat像启动普通java程序一样启动一个web项目.由于有了这个特性，项目不再需要打war包部署到tomcat，而是打成jar包，直接使用java -jar命令启动.&lt;/p&gt;
&lt;h4 id=&quot;如何实现？&quot;&gt;&lt;a href=&quot;#如何实现？&quot; class=&quot;headerlink&quot; title=&quot;如何实现？&quot;&gt;&lt;/a&gt;如何实现？&lt;/h4&gt;&lt;p&gt;1-需要在jenkins上建立n个maven项目打包任务，项目有多少个依赖的父模块，就建多少个。build。&lt;br&gt;2-建立目标项目的maven打包项目。build。&lt;br&gt;3-建立一个自由软件风格任务，作用是使用shell脚本，登录到目标服务器192.168.1.134，执行134上的shell脚本，从Jenkins所在的服务器cp目标jar包，拉取打包好的jar到134，然后启动jar。&lt;/p&gt;
&lt;h3 id=&quot;实现步骤&quot;&gt;&lt;a href=&quot;#实现步骤&quot; class=&quot;headerlink&quot; title=&quot;实现步骤&quot;&gt;&lt;/a&gt;实现步骤&lt;/h3&gt;&lt;p&gt;下面是具体操作&lt;/p&gt;
&lt;h4 id=&quot;1-需要在jenkins上建立n个maven项目打包任务，项目有多少个依赖的父模块，就建多少个。build。&quot;&gt;&lt;a href=&quot;#1-需要在jenkins上建立n个maven项目打包任务，项目有多少个依赖的父模块，就建多少个。build。&quot; class=&quot;headerlink&quot; title=&quot;1-需要在jenkins上建立n个maven项目打包任务，项目有多少个依赖的父模块，就建多少个。build。&quot;&gt;&lt;/a&gt;1-需要在jenkins上建立n个maven项目打包任务，项目有多少个依赖的父模块，就建多少个。build。&lt;/h4&gt;&lt;p&gt;由于要区分不同的部署环境，所以这里先建一个dev环境的项目组&lt;br&gt;&lt;img src=&quot;/images/jenkins-maven-001.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;建立maven打包任务，为项目所依赖的父模块建立编译打包任务&lt;br&gt;主要填好项目任务名称和项目git地址即可&lt;br&gt;&lt;img src=&quot;/images/jenkins-maven-002.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;2-建立目标项目的maven打包项目。build。&quot;&gt;&lt;a href=&quot;#2-建立目标项目的maven打包项目。build。&quot; class=&quot;headerlink&quot; title=&quot;2-建立目标项目的maven打包项目。build。&quot;&gt;&lt;/a&gt;2-建立目标项目的maven打包项目。build。&lt;/h4&gt;&lt;p&gt;&lt;img src=&quot;/images/jenkins-maven-003.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;由于我们要实现不同部署环境区分不同配置，所以我们需要对项目做些额外的工作&lt;br&gt;首先在maven pom中添加profiles设置。我这里添加了3个环境local，dev和prod&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;profiles&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;profile&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &amp;lt;id&amp;gt;local&amp;lt;/id&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &amp;lt;activation&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;lt;activeByDefault&amp;gt;true&amp;lt;/activeByDefault&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &amp;lt;/activation&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &amp;lt;properties&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;lt;env&amp;gt;local&amp;lt;/env&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &amp;lt;/properties&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;/profile&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;profile&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &amp;lt;id&amp;gt;dev&amp;lt;/id&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &amp;lt;properties&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;lt;env&amp;gt;dev&amp;lt;/env&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &amp;lt;/properties&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;/profile&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;profile&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &amp;lt;id&amp;gt;prod&amp;lt;/id&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &amp;lt;properties&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;lt;env&amp;gt;prod&amp;lt;/env&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &amp;lt;/properties&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;/profile&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;lt;/profiles&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;然后，添加maven-resources-plugin插件，这个插件会为我们复制生成三个环境的配置文件目录。&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;plugin&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;lt;artifactId&amp;gt;maven-resources-plugin&amp;lt;/artifactId&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;lt;executions&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &amp;lt;execution&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;lt;id&amp;gt;copy-prod-resources&amp;lt;/id&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;lt;phase&amp;gt;process-resources&amp;lt;/phase&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;lt;goals&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              &amp;lt;goal&amp;gt;copy-resources&amp;lt;/goal&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;lt;/goals&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;lt;configuration&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              &amp;lt;!-- this is important --&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              &amp;lt;overwrite&amp;gt;true&amp;lt;/overwrite&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              &amp;lt;sourceDirectory&amp;gt;$&amp;#123;basedir&amp;#125;/src/main/java&amp;lt;/sourceDirectory&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              &amp;lt;outputDirectory&amp;gt;target/classes&amp;lt;/outputDirectory&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              &amp;lt;resources&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;lt;resource&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                  &amp;lt;directory&amp;gt;src/main/resources&amp;lt;/directory&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                  &amp;lt;includes&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &amp;lt;include&amp;gt;*.properties&amp;lt;/include&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &amp;lt;include&amp;gt;*.xml&amp;lt;/include&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                  &amp;lt;/includes&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;lt;/resource&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;lt;resource&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                  &amp;lt;directory&amp;gt;src/main/resources/$&amp;#123;env&amp;#125;&amp;lt;/directory&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                  &amp;lt;targetPath&amp;gt;&amp;lt;/targetPath&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;lt;/resource&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              &amp;lt;/resources&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              &amp;lt;testSourceDirectory&amp;gt;$&amp;#123;basedir&amp;#125;/src/test/java&amp;lt;/testSourceDirectory&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              &amp;lt;testOutputDirectory&amp;gt;target/test-classes&amp;lt;/testOutputDirectory&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;lt;/configuration&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &amp;lt;/execution&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;lt;/executions&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &amp;lt;/plugin&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;这样就会在resources目录下生成三个不同环境的目录和配置文件&lt;br&gt;&lt;img src=&quot;/images/jenkins-maven-007.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;如果是cli命令行下，我们就可以使用mvn install -P$env命令打包不同环境的配置&lt;br&gt;如dev环境就是mvn install -Pdev&lt;/p&gt;
&lt;p&gt;但是我们现在不是命令行，而是使用Jenkins做编译打包。&lt;br&gt;于是，添加的Jenkins任务，除了任务名称和git地址外，还需要额外多一个配置。&lt;br&gt;在“Build”标签下，填写“goals and options”字段，值为“clean install -Pdev”。&lt;br&gt;-Pdev表示我们要打的正是dev环境的配置&lt;br&gt;&lt;img src=&quot;/images/jenkins-maven-004.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;3-建立一个自由软件风格任务，作用是使用shell脚本，登录到目标服务器192-168-1-134，执行134上的shell脚本，从Jenkins所在的服务器cp目标jar包，拉取打包好的jar到134，然后启动jar。&quot;&gt;&lt;a href=&quot;#3-建立一个自由软件风格任务，作用是使用shell脚本，登录到目标服务器192-168-1-134，执行134上的shell脚本，从Jenkins所在的服务器cp目标jar包，拉取打包好的jar到134，然后启动jar。&quot; class=&quot;headerlink&quot; title=&quot;3-建立一个自由软件风格任务，作用是使用shell脚本，登录到目标服务器192.168.1.134，执行134上的shell脚本，从Jenkins所在的服务器cp目标jar包，拉取打包好的jar到134，然后启动jar。&quot;&gt;&lt;/a&gt;3-建立一个自由软件风格任务，作用是使用shell脚本，登录到目标服务器192.168.1.134，执行134上的shell脚本，从Jenkins所在的服务器cp目标jar包，拉取打包好的jar到134，然后启动jar。&lt;/h4&gt;&lt;p&gt;由于我们需要执行远程服务器上的shell脚本，所以我们必须要让Jenkins知道远程服务器的ssh登录方法。&lt;br&gt;要让Jenkins能登录服务器做远程任务，我们需要在全局配置中配置好“SSH remote host”。&lt;br&gt;&lt;img src=&quot;/images/jenkins-maven-006.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;然后配置一个执行远程shell脚本的任务，如下图。&lt;br&gt;&lt;img src=&quot;/images/jenkins-maven-005.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;这个脚本很简单，只是设置好要登录的服务器，在shell中进入shell脚本所在目录，直接执行目标脚本。&lt;br&gt;而拉取jar包并更新启动springboot项目的任务则有远程脚本所承包了。&lt;/p&gt;
&lt;p&gt;任务脚本例子：&lt;br&gt;这个shell脚本主要做了几件事：&lt;br&gt;1）使用sshpass和scp从119服务器远程复制打包好的jar包回来134，备份，再复制到项目定好的目标路径&lt;br&gt;2）kill关闭原java进程&lt;br&gt;3）使用nohup java -jar ${target_path}/${target_jar} &amp;lt; /dev/null &amp;gt; ${target_bak_path}/${now}/itime-${now}.log 2&amp;gt;&amp;amp;1 &amp;amp;&lt;br&gt;启动java程序，并把日志输出到指定的log文件。&lt;br&gt;4）检查java程序是否启动成功。&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#!/bin/bash&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# script to update and restart project itimes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;remote_source_path=/root/.jenkins/workspace/dev-timeitem-itimes/target&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;target_jar=itimes-1.0.0-SNAPSHOT.jar&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;target_path=/usr/local/itimes&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;target_bak_path=/usr/local/itimes_bak&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;now=$(date &amp;apos;+%Y%m%d%H%M%S&amp;apos;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;echo &amp;quot;update and restart project itimes start...&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;echo &amp;quot;now time: $&amp;#123;now&amp;#125;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mkdir -p $&amp;#123;target_bak_path&amp;#125;/$&amp;#123;now&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/usr/bin/sshpass -p &amp;quot;root&amp;quot; scp root@192.168.1.119:$&amp;#123;remote_source_path&amp;#125;/itimes-1.0.0-SNAPSHOT.jar $&amp;#123;target_bak_path&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;/$&amp;#123;now&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cd $target_bak_path/$now&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;if [ -f $&amp;#123;target_jar&amp;#125; ]; then&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  pkill -f &amp;apos;java.*itimes&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  sleep 3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  temppid=$(ps aux | grep java| grep &amp;quot;$&amp;#123;target_jar&amp;#125;&amp;quot; | grep -v grep | awk &amp;apos;&amp;#123; print $2&amp;#125;&amp;apos;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  if [[ &amp;quot;$temppid&amp;quot; != &amp;quot;&amp;quot; ]]; then&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    echo &amp;quot;temppid is $&amp;#123;temppid&amp;#125;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ps -ef | grep $&amp;#123;target_jar&amp;#125; | grep -v grep | awk &amp;apos;&amp;#123;print $2&amp;#125;&amp;apos; | xargs kill&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  fi&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  echo &amp;quot;kill $&amp;#123;target_jar&amp;#125; done..&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  cd $target_path&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  if [ -f $&amp;#123;target_jar&amp;#125; ]; then&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    rm -f $&amp;#123;target_jar&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    echo &amp;quot;target_jar deleted..&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  else&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    echo &amp;quot;$&amp;#123;target_jar&amp;#125; not exist, go on to copy..&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  fi&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  cp $&amp;#123;target_bak_path&amp;#125;/$&amp;#123;now&amp;#125;/$&amp;#123;target_jar&amp;#125; $&amp;#123;target_path&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  echo &amp;quot;cp done!&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  chmod 755 $&amp;#123;target_jar&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  nohup java -jar $&amp;#123;target_path&amp;#125;/$&amp;#123;target_jar&amp;#125; &amp;lt; /dev/null &amp;gt; $&amp;#123;target_bak_path&amp;#125;/$&amp;#123;now&amp;#125;/itime-$&amp;#123;now&amp;#125;.log 2&amp;gt;&amp;amp;1 &amp;amp;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  echo &amp;quot;app startting..&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  for i in 2 4 6 10; do&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    sleep $i&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    echo &amp;quot;wait and check app starting up...&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    APP_PID=`ps aux | grep java| grep &amp;quot;$&amp;#123;target_jar&amp;#125;&amp;quot; | grep -v grep | awk &amp;apos;&amp;#123; print $2&amp;#125;&amp;apos;`&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if [ $APP_PID &amp;gt; 0 ]; then&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        break;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    else&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        echo &amp;quot;app is still starting up...&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    fi&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  done&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  pid=$(ps aux | grep java| grep &amp;quot;$&amp;#123;target_jar&amp;#125;&amp;quot; | grep -v grep | awk &amp;apos;&amp;#123; print $2&amp;#125;&amp;apos;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  echo &amp;quot;app id is: $&amp;#123;pid&amp;#125;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  if [ $pid ]; then&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    echo &amp;quot;$&amp;#123;target_jar&amp;#125; is running now!&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  else&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    echo &amp;quot;$&amp;#123;target_jar&amp;#125; is not running! $&amp;#123;target_jar&amp;#125; startup failed!&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  fi&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  success_flag=&amp;quot;false&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  for i in 2 4 6 8 10 12; do&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    echo &amp;quot;checking app startup status...&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    success_target_tag=`cat $&amp;#123;target_bak_path&amp;#125;/$&amp;#123;now&amp;#125;/itime-$&amp;#123;now&amp;#125;.log | grep &amp;quot;Started App in&amp;quot;`&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    if [[ &amp;quot;&amp;quot; != &amp;quot;$success_target_tag&amp;quot; ]]; then&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      echo &amp;quot;Found success target tag, app startup successfully..&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      success_flag=&amp;quot;true&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      break;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    else&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        echo &amp;quot;app is still starting up...&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        sleep $i&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        echo &amp;quot;sleep $i ...&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    fi&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  done&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  if [[ &amp;quot;true&amp;quot; != &amp;quot;$success_flag&amp;quot;  ]]; then&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    echo &amp;quot;Not found success target tag, app startup failed...&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  fi&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;else&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  echo &amp;quot;Target jar not exist! Update not complete!&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;fi&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;echo &amp;quot;update done!&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;done.&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;[Jenkins自动化部署实践]Jenkins多环境部署git托管的springboot项目&lt;/p&gt;
&lt;h3 id=&quot;目标&quot;&gt;&lt;a href=&quot;#目标&quot; class=&quot;headerlink&quot; title=&quot;目标&quot;&gt;&lt;/a&gt;目标&lt;/h3&gt;&lt;h4 id=&quot;场景&quot;&gt;&lt;a href
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>使用Jenkins配置Git和Maven的自动化构建Tomcat项目</title>
    <link href="http://yoursite.com/2016/05/30/%E4%BD%BF%E7%94%A8Jenkins%E9%85%8D%E7%BD%AEGit%E5%92%8CMaven%E7%9A%84%E8%87%AA%E5%8A%A8%E5%8C%96%E6%9E%84%E5%BB%BATomcat%E9%A1%B9%E7%9B%AE/"/>
    <id>http://yoursite.com/2016/05/30/使用Jenkins配置Git和Maven的自动化构建Tomcat项目/</id>
    <published>2016-05-30T14:50:38.000Z</published>
    <updated>2016-05-30T15:05:26.125Z</updated>
    
    <content type="html">&lt;h3 id=&quot;0-前置条件&quot;&gt;&lt;a href=&quot;#0-前置条件&quot; class=&quot;headerlink&quot; title=&quot;0- 前置条件&quot;&gt;&lt;/a&gt;0- 前置条件&lt;/h3&gt;&lt;p&gt;安装jdk和tomcat&lt;br&gt;我这里选择同一台服务器安装两个tomcat，一个tomcat作为Jenkins的容器，另外一个tomcat作为简单mvc项目的部署服务器。&lt;br&gt;Jenkins服务器使用8080端口，mvc项目tomcat使用8081端口。&lt;/p&gt;
&lt;h3 id=&quot;1-部署Jenkins&quot;&gt;&lt;a href=&quot;#1-部署Jenkins&quot; class=&quot;headerlink&quot; title=&quot;1 - 部署Jenkins&quot;&gt;&lt;/a&gt;1 - 部署Jenkins&lt;/h3&gt;&lt;p&gt;官网下载&lt;a href=&quot;http://jenkins-ci.org/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://jenkins-ci.org/&lt;/a&gt;&lt;br&gt;我下载的是最新的2.5版本&lt;br&gt;下载得到一个jenkins.war的war包&lt;br&gt;可以直接使用java -j jenkins.war运行，或者把war包放到tomcat运行&lt;br&gt;我这里是放到tomcat，启动tomcat即可.&lt;br&gt;启动后可以在&lt;a href=&quot;http://localhost:8080/jenkins/，看到Jenkins已经在运行&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://localhost:8080/jenkins/，看到Jenkins已经在运行&lt;/a&gt;&lt;br&gt;第一次进入，需要你输入一个key,会提示您在/root/.jenkins/…某个路径下找到&lt;br&gt;进入后会提示你安装一些插件，根据需要安装即可，或者直接安装它提供的一键建议安装.&lt;/p&gt;
&lt;h3 id=&quot;2-安装相关插件&quot;&gt;&lt;a href=&quot;#2-安装相关插件&quot; class=&quot;headerlink&quot; title=&quot;2 - 安装相关插件&quot;&gt;&lt;/a&gt;2 - 安装相关插件&lt;/h3&gt;&lt;p&gt;我这里需要git plugin和maven plugin，可以在插件管理处搜索安装。&lt;br&gt;这两个基本是默认安装好了的.&lt;/p&gt;
&lt;h3 id=&quot;3-安装git和maven&quot;&gt;&lt;a href=&quot;#3-安装git和maven&quot; class=&quot;headerlink&quot; title=&quot;3 - 安装git和maven&quot;&gt;&lt;/a&gt;3 - 安装git和maven&lt;/h3&gt;&lt;p&gt;安装git&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;yum install git&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;安装maven&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1、官网找到最新版的安装包：&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;http://maven.apache.org/download.cgi&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;拷贝文件名为 *-bin.tar.gz 的链接地址；&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2、下载&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# wget http://mirrors.hust.edu.cn/apache/maven/maven-3/3.3.3/binaries/apache-maven-3.3.3-bin.tar.gz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3、解压&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# tar xvf apache-maven-3.3.3-bin.tar.gz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;如果需要：移动到其他目录&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;建立软连接：# ln -s apache-maven-3.3.3 maven&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4、配置环境变量&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# vi /etc/profile&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export M2_HOME=/usr/local/apache-maven&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;export PATH=$PATH:$M2_HOME/bin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# source /etc/profile&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5、验证是否安装成功&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# mvn -version&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Apache Maven 3.3.3 (7994120775791599e205a5524ec3e0dfe41d4a06; 2015-04-22T19:57:37+08:00)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Maven home: /opt/app/maven&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Java version: 1.8.0_51, vendor: Oracle Corporation&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Java home: /usr/java/jdk1.8.0_51/jre&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Default locale: zh_CN, platform encoding: UTF-8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;OS name: &amp;quot;linux&amp;quot;, version: &amp;quot;3.10.0-229.el7.x86_64&amp;quot;, arch: &amp;quot;amd64&amp;quot;, family: &amp;quot;unix&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;4-配置jdk和maven路径等&quot;&gt;&lt;a href=&quot;#4-配置jdk和maven路径等&quot; class=&quot;headerlink&quot; title=&quot;4 - 配置jdk和maven路径等&quot;&gt;&lt;/a&gt;4 - 配置jdk和maven路径等&lt;/h3&gt;&lt;p&gt;选择”系统管理” -&amp;gt; “Global Tool Configuration”&lt;br&gt;在里面配置好jdk，maven的路径，只需要配置它们的根路径.&lt;/p&gt;
&lt;h3 id=&quot;5-创建任务，配置项目信息&quot;&gt;&lt;a href=&quot;#5-创建任务，配置项目信息&quot; class=&quot;headerlink&quot; title=&quot;5 - 创建任务，配置项目信息&quot;&gt;&lt;/a&gt;5 - 创建任务，配置项目信息&lt;/h3&gt;&lt;p&gt;选择“新建”，填写项目任务名，并选择“构建一个maven项目”，保存.&lt;br&gt;&lt;img src=&quot;/images/jenkins-001.png&quot; alt=&quot;&quot;&gt;&lt;br&gt;进入项目配置.&lt;br&gt;填写项目名称&lt;br&gt;填写Repository URL&lt;br&gt;我这里使用的是一个git上的一个建议springmvc项目&lt;br&gt;&lt;a href=&quot;https://github.com/bingyue/easy-springmvc-maven&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/bingyue/easy-springmvc-maven&lt;/a&gt;&lt;br&gt;如果需要，也可以配置一下构建后发送邮件到您的邮箱&lt;br&gt;&lt;img src=&quot;/images/jenkins-002.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;6-配置构建成功后的动作，添加shell&quot;&gt;&lt;a href=&quot;#6-配置构建成功后的动作，添加shell&quot; class=&quot;headerlink&quot; title=&quot;6 - 配置构建成功后的动作，添加shell&quot;&gt;&lt;/a&gt;6 - 配置构建成功后的动作，添加shell&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;/images/jenkins-003.png&quot; alt=&quot;&quot;&gt;&lt;br&gt;配置项目中的“Post Steps”，设置构建完成后的动作.&lt;br&gt;这里我设置为将war包拷贝到Tomcat目录，删除项目原来的内容文件夹，并重启Tomcat。&lt;br&gt;选择Run only if build succeeds or is unstable ，点击添加Execute Shell：&lt;br&gt;shell脚本:&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#!/bin/bash&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#copy file and restart tomcat&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tomcat_path=/usr/local/tomcat/apache-tomcat-7.0.65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;project=easy-springmvc-maven&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;war_name=easy-springmvc-maven.war&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;war_path=http://192.168.1.119:8080/jenkins/job/jenkins-test/ws/target&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;server_port=8081&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;file_path=/root/.jenkins/workspace/jenkins-test/target&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;now=$(date +&amp;quot;%Y%m%d%H%M%S&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;echo &amp;quot;the shell execute time is $&amp;#123;now&amp;#125;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;echo `lsof -n -P -t -i :$&amp;#123;server_port&amp;#125;`&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tomcat_pid=`lsof -n -P -t -i :$&amp;#123;server_port&amp;#125;`&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;echo &amp;quot;the tomcat_pid is $&amp;#123;tomcat_pid&amp;#125;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;if [ &amp;quot;$&amp;#123;tomcat_pid&amp;#125;&amp;quot; != &amp;quot;&amp;quot; ]; then&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   kill -9 $tomcat_pid&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   echo &amp;quot;kill the server&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;fi&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;echo &amp;quot;rm $&amp;#123;tomcat_path&amp;#125;/webapps/$&amp;#123;war_name&amp;#125;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rm $&amp;#123;tomcat_path&amp;#125;/webapps/$&amp;#123;war_name&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;echo &amp;quot;rm -rf $&amp;#123;tomcat_path&amp;#125;/webapps/$&amp;#123;project&amp;#125;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rm -rf $&amp;#123;tomcat_path&amp;#125;/webapps/$&amp;#123;project&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cd $file_path&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;if [ -f $&amp;#123;war_name&amp;#125; ]; then&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   cp $&amp;#123;war_name&amp;#125; $&amp;#123;tomcat_path&amp;#125;/webapps&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   echo &amp;quot;cp war to webapps finished&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;else&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   echo &amp;quot;$&amp;#123;war_name&amp;#125; unexists&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;fi&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cd $tomcat_path/bin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;echo &amp;quot;run startup&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo ./startup.sh&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;echo &amp;quot;server restarted&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;我这里是在/usr/local/tomcat/apache-tomcat-7.0.65&lt;br&gt;这个路径下配置了另外一个tomcat来运行测试的web项目.&lt;br&gt;shell脚本启动tomcat的命令”./startup.sh”，注意要使用sudo&lt;/p&gt;
&lt;h3 id=&quot;7-运行构建项目&quot;&gt;&lt;a href=&quot;#7-运行构建项目&quot; class=&quot;headerlink&quot; title=&quot;7 - 运行构建项目&quot;&gt;&lt;/a&gt;7 - 运行构建项目&lt;/h3&gt;&lt;p&gt;打开项目的主面板，直接点击绿色的运行任务构建按钮。&lt;/p&gt;
&lt;p&gt;done!&lt;/p&gt;
&lt;h3 id=&quot;8-其他&quot;&gt;&lt;a href=&quot;#8-其他&quot; class=&quot;headerlink&quot; title=&quot;8 - 其他&quot;&gt;&lt;/a&gt;8 - 其他&lt;/h3&gt;&lt;p&gt;这个例子使用了同一台服务器部署Jenkins和实际项目。&lt;br&gt;实际应用则常用法是Jenkins单独部署，&lt;br&gt;所有别的要部署的项目，自己拥有服务器，为每个项目都创建Jenkins任务，在项目编译成功后，到Jenkins服务器下载编译好的部署包，然后依旧使用shell脚本完成这一切。&lt;br&gt;并且，可以为不同的部署环境配置不同的任务。一切都是可以定制的。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;0-前置条件&quot;&gt;&lt;a href=&quot;#0-前置条件&quot; class=&quot;headerlink&quot; title=&quot;0- 前置条件&quot;&gt;&lt;/a&gt;0- 前置条件&lt;/h3&gt;&lt;p&gt;安装jdk和tomcat&lt;br&gt;我这里选择同一台服务器安装两个tomcat，一个tomcat作为Jenk
    
    </summary>
    
    
      <category term="java" scheme="http://yoursite.com/tags/java/"/>
    
      <category term="git" scheme="http://yoursite.com/tags/git/"/>
    
      <category term="jenkins" scheme="http://yoursite.com/tags/jenkins/"/>
    
      <category term="持续集成" scheme="http://yoursite.com/tags/%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90/"/>
    
      <category term="自动化构建" scheme="http://yoursite.com/tags/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%9E%84%E5%BB%BA/"/>
    
  </entry>
  
  <entry>
    <title>java static 关键字总结</title>
    <link href="http://yoursite.com/2016/05/09/java-static-%E5%85%B3%E9%94%AE%E5%AD%97%E6%80%BB%E7%BB%93/"/>
    <id>http://yoursite.com/2016/05/09/java-static-关键字总结/</id>
    <published>2016-05-08T16:11:19.000Z</published>
    <updated>2016-05-08T16:14:15.474Z</updated>
    
    <content type="html">&lt;h2 id=&quot;总结：&quot;&gt;&lt;a href=&quot;#总结：&quot; class=&quot;headerlink&quot; title=&quot;总结：&quot;&gt;&lt;/a&gt;总结：&lt;/h2&gt;&lt;h3 id=&quot;1&quot;&gt;&lt;a href=&quot;#1&quot; class=&quot;headerlink&quot; title=&quot;1.&quot;&gt;&lt;/a&gt;1.&lt;/h3&gt;&lt;p&gt;修饰方法时，表示该方法是静态方法，表示该类的该方法可以不产生实例而直接通过类名加方法名的方法去执行该静态方法；&lt;/p&gt;
&lt;h3 id=&quot;2&quot;&gt;&lt;a href=&quot;#2&quot; class=&quot;headerlink&quot; title=&quot;2.&quot;&gt;&lt;/a&gt;2.&lt;/h3&gt;&lt;p&gt;修饰变量时，表示该变量是静态变量，在java里可以理解为静态变量全局变量。&lt;br&gt;该类的所有实例共享此静态变量，类装载时，只会分配一块存储空间，所有此类对象可以操作此块存储空间。&lt;br&gt;也就是说，static修饰的静态变量也是可以直接通过类名加变量名直接使用的&lt;/p&gt;
&lt;h3 id=&quot;3&quot;&gt;&lt;a href=&quot;#3&quot; class=&quot;headerlink&quot; title=&quot;3.&quot;&gt;&lt;/a&gt;3.&lt;/h3&gt;&lt;p&gt;普通类不允许被声明为静态的，只有一个内部类可以。&lt;br&gt;被声明为静态的内部类，可以直接作为一个普通类来使用，而不需要一个外部类了。&lt;/p&gt;
&lt;h2 id=&quot;详述：&quot;&gt;&lt;a href=&quot;#详述：&quot; class=&quot;headerlink&quot; title=&quot;详述：&quot;&gt;&lt;/a&gt;详述：&lt;/h2&gt;&lt;h3 id=&quot;1-1&quot;&gt;&lt;a href=&quot;#1-1&quot; class=&quot;headerlink&quot; title=&quot;1.&quot;&gt;&lt;/a&gt;1.&lt;/h3&gt;&lt;p&gt; static表示“全局”或者“静态”的意思，用来修饰成员变量和成员方法，也可以形成静态static代码块，但是Java语言中没有全局变量的概念。 &lt;/p&gt;
&lt;p&gt;　被static修饰的成员变量和成员方法独立于该类的任何对象。也就是说，它不依赖类特定的实例，被类的所有实例共享。只要这个类被加载，Java虚拟机就能根据类名在运行时数据区的方法区内定找到他们。因此，static对象可以在它的任何对象创建之前访问，无需引用任何对象。 &lt;/p&gt;
&lt;p&gt;　用public修饰的static成员变量和成员方法本质是全局变量和全局方法，当声明它类的对象时，不生成static变量的副本，而是类的所有实例共享同一个static变量。 &lt;/p&gt;
&lt;p&gt;　static 变量前可以有private修饰，表示这个变量可以在类的静态代码块中，或者类的其他静态成员方法中使用（当然也可以在非静态成员方法中使用–废话），但是不能在其他类中通过类名来直接引用，这一点很重要。实际上你需要搞明白，private是访问权限限定，static表示不要实例化就可以使用，这样就容易理解多了。static前面加上其它访问权限关键字的效果也以此类推。 &lt;/p&gt;
&lt;p&gt;　static修饰的成员变量和成员方法习惯上称为静态变量和静态方法，可以直接通过类名来访问，访问语法为：&lt;br&gt;类名.静态方法名(参数列表…)&lt;br&gt;类名.静态变量名 &lt;/p&gt;
&lt;p&gt;　用static修饰的代码块表示静态代码块，当Java虚拟机（JVM）加载类时，就会执行该代码块（用处非常大，呵呵）。 &lt;/p&gt;
&lt;h3 id=&quot;2-static变量&quot;&gt;&lt;a href=&quot;#2-static变量&quot; class=&quot;headerlink&quot; title=&quot;2.static变量&quot;&gt;&lt;/a&gt;2.static变量&lt;/h3&gt;&lt;p&gt;　按照是否静态的对类成员变量进行分类可分两种：一种是被static修饰的变量，叫静态变量或类变量；另一种是没有被static修饰的变量，叫实例变量。两者的区别是：&lt;br&gt;　对于静态变量在内存中只有一个拷贝（节省内存），JVM只为静态分配一次内存，在加载类的过程中完成静态变量的内存分配，可用类名直接访问（方便），当然也可以通过对象来访问（但是这是不推荐的）。&lt;br&gt;　对于实例变量，没创建一个实例，就会为实例变量分配一次内存，实例变量可以在内存中有多个拷贝，互不影响（灵活）。 &lt;/p&gt;
&lt;h3 id=&quot;3-static方法&quot;&gt;&lt;a href=&quot;#3-static方法&quot; class=&quot;headerlink&quot; title=&quot;3.static方法&quot;&gt;&lt;/a&gt;3.static方法&lt;/h3&gt;&lt;p&gt;　静态方法可以直接通过类名调用，任何的实例也都可以调用，因此静态方法中不能用this和super关键字，不能直接访问所属类的实例变量和实例方法 (就是不带static的成员变量和成员成员方法)，只能访问所属类的静态成员变量和成员方法。因为实例成员与特定的对象关联！这个需要去理解，想明白其中的道理，不是记忆！！！&lt;br&gt;　因为static方法独立于任何实例，因此static方法必须被实现，而不能是抽象的abstract。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;总结：&quot;&gt;&lt;a href=&quot;#总结：&quot; class=&quot;headerlink&quot; title=&quot;总结：&quot;&gt;&lt;/a&gt;总结：&lt;/h2&gt;&lt;h3 id=&quot;1&quot;&gt;&lt;a href=&quot;#1&quot; class=&quot;headerlink&quot; title=&quot;1.&quot;&gt;&lt;/a&gt;1.&lt;/h3&gt;&lt;p&gt;修
    
    </summary>
    
    
      <category term="java" scheme="http://yoursite.com/tags/java/"/>
    
      <category term="static关键字" scheme="http://yoursite.com/tags/static%E5%85%B3%E9%94%AE%E5%AD%97/"/>
    
  </entry>
  
  <entry>
    <title>[java][enum]典型用法</title>
    <link href="http://yoursite.com/2016/05/08/java-enum-%E5%85%B8%E5%9E%8B%E7%94%A8%E6%B3%95/"/>
    <id>http://yoursite.com/2016/05/08/java-enum-典型用法/</id>
    <published>2016-05-08T15:57:31.000Z</published>
    <updated>2016-05-08T16:07:15.203Z</updated>
    
    <content type="html">&lt;h2 id=&quot;java-enum典型用法&quot;&gt;&lt;a href=&quot;#java-enum典型用法&quot; class=&quot;headerlink&quot; title=&quot;java enum典型用法&quot;&gt;&lt;/a&gt;java enum典型用法&lt;/h2&gt;&lt;h3 id=&quot;代码：&quot;&gt;&lt;a href=&quot;#代码：&quot; class=&quot;headerlink&quot; title=&quot;代码：&quot;&gt;&lt;/a&gt;代码：&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;package com.iyihua.model.enums;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import java.util.HashMap;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import java.util.Map;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;public enum GroupType &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     CATEGORY(0, &amp;quot;category&amp;quot;), PROJECT(1, &amp;quot;project&amp;quot;), LOCATION(2, &amp;quot;location&amp;quot; );&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     private final int id;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     private final String key;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     GroupType(int id, String key) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            this. id = id;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            this. key = key;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     public int getId() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            return id;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     public String getKey() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            return key;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     private static final Map&amp;lt;String, GroupType&amp;gt; keyToEnum = new HashMap&amp;lt;String, GroupType&amp;gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     static &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            for (GroupType gt : GroupType. values())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                 keyToEnum.put(gt .getKey(), gt );&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     public static GroupType fromString(String symbol) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            return keyToEnum.get(symbol );&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     public static void main(String[] args) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           System. out.println( fromString(&amp;quot;category&amp;quot;));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;说明：&quot;&gt;&lt;a href=&quot;#说明：&quot; class=&quot;headerlink&quot; title=&quot;说明：&quot;&gt;&lt;/a&gt;说明：&lt;/h3&gt;&lt;p&gt;代码中把枚举值对应的string-枚举放到了一个map keyToEnum中，并且是静态化的。&lt;br&gt;如此就可以通过fromString方法，传入key string值，即可返回对应的enum值&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;java-enum典型用法&quot;&gt;&lt;a href=&quot;#java-enum典型用法&quot; class=&quot;headerlink&quot; title=&quot;java enum典型用法&quot;&gt;&lt;/a&gt;java enum典型用法&lt;/h2&gt;&lt;h3 id=&quot;代码：&quot;&gt;&lt;a href=&quot;#代码：&quot; c
    
    </summary>
    
    
      <category term="java" scheme="http://yoursite.com/tags/java/"/>
    
      <category term="enum" scheme="http://yoursite.com/tags/enum/"/>
    
  </entry>
  
  <entry>
    <title>[java][design-pattern]java设计模式之Builder模式</title>
    <link href="http://yoursite.com/2016/05/08/java-design-pattern-java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8BBuilder%E6%A8%A1%E5%BC%8F/"/>
    <id>http://yoursite.com/2016/05/08/java-design-pattern-java设计模式之Builder模式/</id>
    <published>2016-05-08T08:58:38.000Z</published>
    <updated>2016-05-08T09:00:12.177Z</updated>
    
    <content type="html">&lt;h2 id=&quot;java设计模式之Builder模式&quot;&gt;&lt;a href=&quot;#java设计模式之Builder模式&quot; class=&quot;headerlink&quot; title=&quot;java设计模式之Builder模式&quot;&gt;&lt;/a&gt;java设计模式之Builder模式&lt;/h2&gt;&lt;p&gt;设计模式模式很多，实际常用的很少。&lt;br&gt;《Effective Java》这本书里提到过的一种模式builder模式，个人认为非常值得推荐。&lt;br&gt;假设有一个entity(Entity)，有id，name两个字段，如下：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;package demo;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;public class Entity &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    private int id;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    private String name;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    public int getId() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return id;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    public void setId(int id) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        this.id = id;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    public String getName() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return name;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    public void setName(String name) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        this.name = name;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;为了不用每次初始化的时候，要一个一个的setxxx设置字段值，通常我们会创建构造函数，通过构造函数直接传入字段，初始化。&lt;br&gt;加入构造函数的实体代码如下：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;public class Entity &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    private int id;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    private String name;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    public Entity() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        super();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    public Entity(int id, String name) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        super();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        this.id = id;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        this.name = name;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    public int getId() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return id;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    public void setId(int id) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        this.id = id;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    public String getName() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return name;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    public void setName(String name) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        this.name = name;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;然后需要初始化实体的时候，我们这样做：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Entity entity = new Entity(1, &amp;quot;name&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;这种用法很常用，但是问题来了。&lt;br&gt;当实体Entity的字段需要增加变化的时候怎么办呢？&lt;br&gt;比如增加字段descr，这样构造函数和客户端初始化都需要更新：&lt;br&gt;实体增加：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;private String descr;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;public String getDescr() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return descr;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;public void setDescr(String descr) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    this.descr = descr;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;public Entity(int id, String name, String descr) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    super();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    this.id = id;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    this.name = name;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    this.descr = descr;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;然后原来调用构造函数初始化的代码也需要改动：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Entity entity = new Entity(1, &amp;quot;name&amp;quot;, &amp;quot;descr&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;如果你的class是不确定的参数，后续可能经常变动，那么你的构造函数可能需要很多个，并且不停的变动，而且，构造函数参数多的时候，参数也很不容易记住。&lt;/p&gt;
&lt;p&gt;而Effective Java中则推荐一种builder模式来进行实体初始化&lt;br&gt;如下：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;public class Entity &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    private int id;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    private String name;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    private String descr;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    public static class Builder &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        private int id;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        private String name;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        private String descr;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        public Builder(int id) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            this.id = id;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        public Builder name(String name) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            this.name = name;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            return this;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        public Builder descr(String descr) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            this.descr = descr;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            return this;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        public Entity build() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            return new Entity(this);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    private Entity(Builder b) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        this.id = b.id;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        this.name = b.name;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        this.descr = b.descr;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;初始化实例的时候，如下：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Entity entity = new Entity.Builder(10).name(&amp;quot;name&amp;quot;).descr(&amp;quot;descr&amp;quot;).build();&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;这样的写法，好处是，假如实体Entity以后变化很大，加入很多字段，不会影响到之前客户端初始化的代码，而且，这个初始化的过程非常清晰简单。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;java设计模式之Builder模式&quot;&gt;&lt;a href=&quot;#java设计模式之Builder模式&quot; class=&quot;headerlink&quot; title=&quot;java设计模式之Builder模式&quot;&gt;&lt;/a&gt;java设计模式之Builder模式&lt;/h2&gt;&lt;p&gt;设计模式模式
    
    </summary>
    
    
      <category term="java" scheme="http://yoursite.com/tags/java/"/>
    
      <category term="设计模式" scheme="http://yoursite.com/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
      <category term="Builder" scheme="http://yoursite.com/tags/Builder/"/>
    
      <category term="design pattern" scheme="http://yoursite.com/tags/design-pattern/"/>
    
  </entry>
  
  <entry>
    <title>java-web知识体系</title>
    <link href="http://yoursite.com/2016/05/04/java-web%E7%9F%A5%E8%AF%86%E4%BD%93%E7%B3%BB/"/>
    <id>http://yoursite.com/2016/05/04/java-web知识体系/</id>
    <published>2016-05-04T15:05:21.000Z</published>
    <updated>2016-05-04T15:07:13.154Z</updated>
    
    <content type="html">&lt;h2 id=&quot;一张java-web知识体系思维导图&quot;&gt;&lt;a href=&quot;#一张java-web知识体系思维导图&quot; class=&quot;headerlink&quot; title=&quot;一张java web知识体系思维导图&quot;&gt;&lt;/a&gt;一张java web知识体系思维导图&lt;/h2&gt;&lt;p&gt;就是稍微旧了点&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/java-web.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;一张java-web知识体系思维导图&quot;&gt;&lt;a href=&quot;#一张java-web知识体系思维导图&quot; class=&quot;headerlink&quot; title=&quot;一张java web知识体系思维导图&quot;&gt;&lt;/a&gt;一张java web知识体系思维导图&lt;/h2&gt;&lt;p&gt;就是稍微旧了
    
    </summary>
    
    
      <category term="java" scheme="http://yoursite.com/tags/java/"/>
    
      <category term="思维导图" scheme="http://yoursite.com/tags/%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE/"/>
    
      <category term="web" scheme="http://yoursite.com/tags/web/"/>
    
      <category term="java web" scheme="http://yoursite.com/tags/java-web/"/>
    
  </entry>
  
  <entry>
    <title>springmvc rest api versioning</title>
    <link href="http://yoursite.com/2016/05/03/springmvc-rest-api-versioning/"/>
    <id>http://yoursite.com/2016/05/03/springmvc-rest-api-versioning/</id>
    <published>2016-05-03T15:34:35.000Z</published>
    <updated>2016-05-03T15:37:38.979Z</updated>
    
    <content type="html">&lt;p&gt;&lt;a href=&quot;https://github.com/mindhaq/restapi-versioning-spring.git&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/mindhaq/restapi-versioning-spring.git&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://github.com/augusto/restVersioning.git&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/augusto/restVersioning.git&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;这两个git项目里提供了4种在springmvc中进行api版本控制的处理方法。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;/api/v1/xxx&lt;br&gt;controller中的方法注解写法：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;@ResponseBody&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;@RequestMapping(value = &amp;quot;/apiurl/&amp;#123;version&amp;#125;/hello&amp;quot;, method = GET, produces = APPLICATION_JSON_VALUE)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;public Hello sayHelloWorldUrl(@PathVariable final ValidVersion version) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return new Hello();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;/api/xxx&lt;br&gt;在header中添加”X-API-Version”:”v1”来进行版本请求的区别&lt;br&gt;controller中的方法注解写法：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;@ResponseBody&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;@RequestMapping(value = &amp;quot;/apiheader/hello&amp;quot;, method = GET, produces = APPLICATION_JSON_VALUE)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;public Hello sayHelloWorldHeader(@RequestHeader(&amp;quot;X-API-Version&amp;quot;) final ValidVersion version) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return new Hello();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;/api/xxx&lt;br&gt;在header中添加Accept: “application/vnd.company.app-v1+json”来进行版本区别&lt;br&gt;controller中的方法注解写法：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;@ResponseBody&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;@RequestMapping(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    value = &amp;quot;/apiaccept/hello&amp;quot;, method = GET,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    produces = &amp;#123;&amp;quot;application/vnd.company.app-v1+json&amp;quot;, &amp;quot;application/vnd.company.app-v2+json&amp;quot;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;/api/xxx&lt;br&gt;在header中添加Accept: “application/vnd.company.app-v1+json”来进行版本区别&lt;br&gt;controller写法：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;@Controller&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;@VersionedResource(media = &amp;quot;application/vnd.app.resource&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;public class TestController &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    @RequestMapping(value = &amp;#123;&amp;quot;/resource&amp;quot;&amp;#125;, method = RequestMethod.GET)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    @VersionedResource(from = &amp;quot;1.0&amp;quot;, to = &amp;quot;1.0&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    @ResponseBody&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    public Resource getResource_v1() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return new Resource(&amp;quot;1.0&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    @RequestMapping(value = &amp;#123;&amp;quot;/resource&amp;quot;&amp;#125;, method = RequestMethod.GET)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    @VersionedResource(from = &amp;quot;2.0&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    @ResponseBody&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    public Resource getResource_v2_onwards() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return new Resource(&amp;quot;2.0&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;/ol&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;https://github.com/mindhaq/restapi-versioning-spring.git&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/mindhaq/restapi-vers
    
    </summary>
    
    
      <category term="java" scheme="http://yoursite.com/tags/java/"/>
    
      <category term="rest" scheme="http://yoursite.com/tags/rest/"/>
    
      <category term="api" scheme="http://yoursite.com/tags/api/"/>
    
      <category term="versioning" scheme="http://yoursite.com/tags/versioning/"/>
    
      <category term="springmvc" scheme="http://yoursite.com/tags/springmvc/"/>
    
  </entry>
  
  <entry>
    <title>centos6环境下配置mysql主从同步</title>
    <link href="http://yoursite.com/2016/04/25/centos6%E7%8E%AF%E5%A2%83%E4%B8%8B%E9%85%8D%E7%BD%AEmysql%E4%B8%BB%E4%BB%8E%E5%90%8C%E6%AD%A5/"/>
    <id>http://yoursite.com/2016/04/25/centos6环境下配置mysql主从同步/</id>
    <published>2016-04-25T13:22:51.000Z</published>
    <updated>2016-04-25T13:25:33.126Z</updated>
    
    <content type="html">&lt;h2 id=&quot;1、主从服务器分别作以下操作：&quot;&gt;&lt;a href=&quot;#1、主从服务器分别作以下操作：&quot; class=&quot;headerlink&quot; title=&quot;1、主从服务器分别作以下操作：&quot;&gt;&lt;/a&gt;1、主从服务器分别作以下操作：&lt;/h2&gt;&lt;p&gt;  1.1、版本一致&lt;br&gt;  1.2、初始化表，并在后台启动mysql&lt;br&gt;  1.3、修改root的密码&lt;/p&gt;
&lt;h2 id=&quot;2、修改主服务器master&quot;&gt;&lt;a href=&quot;#2、修改主服务器master&quot; class=&quot;headerlink&quot; title=&quot;2、修改主服务器master:&quot;&gt;&lt;/a&gt;2、修改主服务器master:&lt;/h2&gt;&lt;p&gt;   #vi /etc/my.cnf&lt;br&gt;       [mysqld]&lt;br&gt;       log-bin=mysql-bin   //[必须]启用二进制日志&lt;br&gt;       server-id=222      //[必须]服务器唯一ID，默认是1，一般取IP最后一段&lt;/p&gt;
&lt;h2 id=&quot;3、修改从服务器slave&quot;&gt;&lt;a href=&quot;#3、修改从服务器slave&quot; class=&quot;headerlink&quot; title=&quot;3、修改从服务器slave:&quot;&gt;&lt;/a&gt;3、修改从服务器slave:&lt;/h2&gt;&lt;p&gt;   #vi /etc/my.cnf&lt;br&gt;       [mysqld]&lt;br&gt;       log-bin=mysql-bin   //[不是必须]启用二进制日志&lt;br&gt;       server-id=226      //[必须]服务器唯一ID，默认是1，一般取IP最后一段&lt;/p&gt;
&lt;h2 id=&quot;4、重启两台服务器的mysql&quot;&gt;&lt;a href=&quot;#4、重启两台服务器的mysql&quot; class=&quot;headerlink&quot; title=&quot;4、重启两台服务器的mysql&quot;&gt;&lt;/a&gt;4、重启两台服务器的mysql&lt;/h2&gt;&lt;pre&gt;&lt;code&gt;/etc/init.d/mysql restart
or：
service mysqld restart
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&quot;5、在主服务器上建立帐户并授权slave&quot;&gt;&lt;a href=&quot;#5、在主服务器上建立帐户并授权slave&quot; class=&quot;headerlink&quot; title=&quot;5、在主服务器上建立帐户并授权slave:&quot;&gt;&lt;/a&gt;5、在主服务器上建立帐户并授权slave:&lt;/h2&gt;&lt;p&gt;  #mysql -uroot -proot&lt;br&gt;   mysql&amp;gt;GRANT REPLICATION SLAVE ON &lt;em&gt;.&lt;/em&gt; to ‘mysync’@’%’ identified by ‘root’; //一般不用root帐号，%表示所有客户端都可能连，只要帐号，密码正确，此处可用具体客户端IP代替，如192.168.145.226，加强安全。&lt;/p&gt;
&lt;h2 id=&quot;6、登录主服务器的mysql，查询master的状态&quot;&gt;&lt;a href=&quot;#6、登录主服务器的mysql，查询master的状态&quot; class=&quot;headerlink&quot; title=&quot;6、登录主服务器的mysql，查询master的状态&quot;&gt;&lt;/a&gt;6、登录主服务器的mysql，查询master的状态&lt;/h2&gt;&lt;p&gt;   mysql&amp;gt;show master status;&lt;br&gt;   +——————+———-+————–+——————+&lt;br&gt;   | File             | Position | Binlog_Do_DB | Binlog_Ignore_DB |&lt;br&gt;   +——————+———-+————–+——————+&lt;br&gt;   | mysql-bin.000004 |      308 |              |                  |&lt;br&gt;   +——————+———-+————–+——————+&lt;br&gt;   1 row in set (0.00 sec)&lt;br&gt;   注：执行完此步骤后不要再操作主服务器MYSQL，防止主服务器状态值变化&lt;/p&gt;
&lt;h2 id=&quot;7、配置从服务器Slave：&quot;&gt;&lt;a href=&quot;#7、配置从服务器Slave：&quot; class=&quot;headerlink&quot; title=&quot;7、配置从服务器Slave：&quot;&gt;&lt;/a&gt;7、配置从服务器Slave：&lt;/h2&gt;&lt;p&gt;   mysql&amp;gt;change master to master_host=’192.168.145.222’,master_user=’mysync’,master_password=’root’, master_log_file=’mysql-bin.000004’,master_log_pos=308;   //注意不要断开，308数字前后无单引号。&lt;/p&gt;
&lt;p&gt;   Mysql&amp;gt;start slave;    //启动从服务器复制功能&lt;/p&gt;
&lt;h2 id=&quot;8、检查从服务器复制功能状态：&quot;&gt;&lt;a href=&quot;#8、检查从服务器复制功能状态：&quot; class=&quot;headerlink&quot; title=&quot;8、检查从服务器复制功能状态：&quot;&gt;&lt;/a&gt;8、检查从服务器复制功能状态：&lt;/h2&gt;&lt;p&gt;   mysql&amp;gt; show slave status\G&lt;/p&gt;
&lt;p&gt;   &lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;em&gt;*&lt;/em&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt; 1. row &lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;em&gt;*&lt;/em&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Slave_IO_State: Waiting for master to send event
Master_Host: 192.168.2.222  //主服务器地址
Master_User: mysync   //授权帐户名，尽量避免使用root
Master_Port: 3306    //数据库端口，部分版本没有此行
Connect_Retry: 60
Master_Log_File: mysql-bin.000004
Read_Master_Log_Pos: 600     //#同步读取二进制日志的位置，大于等于Exec_Master_Log_Pos
Relay_Log_File: ddte-relay-bin.000003
Relay_Log_Pos: 251
Relay_Master_Log_File: mysql-bin.000004
Slave_IO_Running: Yes    //此状态必须YES
Slave_SQL_Running: Yes     //此状态必须YES
      ......
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;注：Slave_IO及Slave_SQL进程必须正常运行，即YES状态，否则都是错误的状态(如：其中一个NO均属错误)。&lt;/p&gt;
&lt;p&gt;以上操作过程，主从服务器配置完成。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;1、主从服务器分别作以下操作：&quot;&gt;&lt;a href=&quot;#1、主从服务器分别作以下操作：&quot; class=&quot;headerlink&quot; title=&quot;1、主从服务器分别作以下操作：&quot;&gt;&lt;/a&gt;1、主从服务器分别作以下操作：&lt;/h2&gt;&lt;p&gt;  1.1、版本一致&lt;br&gt;  1.
    
    </summary>
    
    
      <category term="mysql" scheme="http://yoursite.com/tags/mysql/"/>
    
      <category term="database" scheme="http://yoursite.com/tags/database/"/>
    
      <category term="数据库" scheme="http://yoursite.com/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
      <category term="主从同步" scheme="http://yoursite.com/tags/%E4%B8%BB%E4%BB%8E%E5%90%8C%E6%AD%A5/"/>
    
      <category term="master-slave" scheme="http://yoursite.com/tags/master-slave/"/>
    
  </entry>
  
  <entry>
    <title>centos6下安装配置mysql，并开启mysql的远程登录</title>
    <link href="http://yoursite.com/2016/04/25/centos6%E4%B8%8B%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AEmysql%EF%BC%8C%E5%B9%B6%E5%BC%80%E5%90%AFmysql%E7%9A%84%E8%BF%9C%E7%A8%8B%E7%99%BB%E5%BD%95/"/>
    <id>http://yoursite.com/2016/04/25/centos6下安装配置mysql，并开启mysql的远程登录/</id>
    <published>2016-04-25T13:00:38.000Z</published>
    <updated>2016-04-25T13:04:16.768Z</updated>
    
    <content type="html">&lt;h2 id=&quot;安装：&quot;&gt;&lt;a href=&quot;#安装：&quot; class=&quot;headerlink&quot; title=&quot;安装：&quot;&gt;&lt;/a&gt;安装：&lt;/h2&gt;&lt;h3 id=&quot;查看是否已安装mysql：&quot;&gt;&lt;a href=&quot;#查看是否已安装mysql：&quot; class=&quot;headerlink&quot; title=&quot;查看是否已安装mysql：&quot;&gt;&lt;/a&gt;查看是否已安装mysql：&lt;/h3&gt;&lt;p&gt;yum list installed | grep mysql&lt;/p&gt;
&lt;h3 id=&quot;如果已安装，如下一次卸载：&quot;&gt;&lt;a href=&quot;#如果已安装，如下一次卸载：&quot; class=&quot;headerlink&quot; title=&quot;如果已安装，如下一次卸载：&quot;&gt;&lt;/a&gt;如果已安装，如下一次卸载：&lt;/h3&gt;&lt;p&gt;yum -y remove mysql-libs.x86_64&lt;/p&gt;
&lt;h3 id=&quot;查看可用mysql：&quot;&gt;&lt;a href=&quot;#查看可用mysql：&quot; class=&quot;headerlink&quot; title=&quot;查看可用mysql：&quot;&gt;&lt;/a&gt;查看可用mysql：&lt;/h3&gt;&lt;p&gt;yum list | grep mysql 或 yum -y list mysql*&lt;/p&gt;
&lt;h3 id=&quot;安装mysql：&quot;&gt;&lt;a href=&quot;#安装mysql：&quot; class=&quot;headerlink&quot; title=&quot;安装mysql：&quot;&gt;&lt;/a&gt;安装mysql：&lt;/h3&gt;&lt;p&gt;yum -y install mysql-server mysql mysql-devel&lt;/p&gt;
&lt;h3 id=&quot;查看已安装的mysql状态：&quot;&gt;&lt;a href=&quot;#查看已安装的mysql状态：&quot; class=&quot;headerlink&quot; title=&quot;查看已安装的mysql状态：&quot;&gt;&lt;/a&gt;查看已安装的mysql状态：&lt;/h3&gt;&lt;p&gt;rpm -qi mysql-server&lt;/p&gt;
&lt;h3 id=&quot;安装后一开始登陆不上的问题：在进入mysql工具时，总是有错误提示&quot;&gt;&lt;a href=&quot;#安装后一开始登陆不上的问题：在进入mysql工具时，总是有错误提示&quot; class=&quot;headerlink&quot; title=&quot;安装后一开始登陆不上的问题：在进入mysql工具时，总是有错误提示:&quot;&gt;&lt;/a&gt;安装后一开始登陆不上的问题：在进入mysql工具时，总是有错误提示:&lt;/h3&gt;&lt;p&gt;mysql -u root -p&lt;br&gt;Enter password:&lt;br&gt;ERROR 1045 (28000): Access denied for user ‘root’@’localhost’ (using password: NO)&lt;/p&gt;
&lt;h3 id=&quot;解决：方法操作很简单，如下：&quot;&gt;&lt;a href=&quot;#解决：方法操作很简单，如下：&quot; class=&quot;headerlink&quot; title=&quot;解决：方法操作很简单，如下：&quot;&gt;&lt;/a&gt;解决：方法操作很简单，如下：&lt;/h3&gt;&lt;p&gt;/etc/init.d/mysql stop&lt;br&gt;mysqld_safe –user=mysql –skip-grant-tables –skip-networking &amp;amp;&lt;br&gt;mysql -u root mysql&lt;br&gt;mysql&amp;gt; UPDATE user SET Password=PASSWORD(‘root’) where USER=’root’ and host=’root’ or host=’localhost’;//把空的用户密码都修改成非空的密码就行了。&lt;br&gt;mysql&amp;gt; FLUSH PRIVILEGES;&lt;br&gt;mysql&amp;gt; quit&lt;br&gt;/etc/init.d/mysqld restart&lt;br&gt;mysql -uroot -p&lt;br&gt;Enter password: &amp;lt;输入新设的密码newpassword&amp;gt;&lt;/p&gt;
&lt;h2 id=&quot;开启远程连接&quot;&gt;&lt;a href=&quot;#开启远程连接&quot; class=&quot;headerlink&quot; title=&quot;开启远程连接&quot;&gt;&lt;/a&gt;开启远程连接&lt;/h2&gt;&lt;h3 id=&quot;设置任意ip可以使用root账户和root密码远程登录&quot;&gt;&lt;a href=&quot;#设置任意ip可以使用root账户和root密码远程登录&quot; class=&quot;headerlink&quot; title=&quot;设置任意ip可以使用root账户和root密码远程登录&quot;&gt;&lt;/a&gt;设置任意ip可以使用root账户和root密码远程登录&lt;/h3&gt;&lt;p&gt;grant all privileges  on &lt;em&gt;.&lt;/em&gt; to root@’%’ identified by “root”;&lt;/p&gt;
&lt;h3 id=&quot;刷新&quot;&gt;&lt;a href=&quot;#刷新&quot; class=&quot;headerlink&quot; title=&quot;刷新&quot;&gt;&lt;/a&gt;刷新&lt;/h3&gt;&lt;p&gt;FLUSH PRIVILEGES;&lt;/p&gt;
&lt;h3 id=&quot;重启：&quot;&gt;&lt;a href=&quot;#重启：&quot; class=&quot;headerlink&quot; title=&quot;重启：&quot;&gt;&lt;/a&gt;重启：&lt;/h3&gt;&lt;p&gt;service mysqld restart&lt;/p&gt;
&lt;p&gt;done！&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;安装：&quot;&gt;&lt;a href=&quot;#安装：&quot; class=&quot;headerlink&quot; title=&quot;安装：&quot;&gt;&lt;/a&gt;安装：&lt;/h2&gt;&lt;h3 id=&quot;查看是否已安装mysql：&quot;&gt;&lt;a href=&quot;#查看是否已安装mysql：&quot; class=&quot;headerlink&quot; ti
    
    </summary>
    
    
      <category term="mysql" scheme="http://yoursite.com/tags/mysql/"/>
    
      <category term="install" scheme="http://yoursite.com/tags/install/"/>
    
      <category term="database" scheme="http://yoursite.com/tags/database/"/>
    
  </entry>
  
  <entry>
    <title>[springboot+shiro+redis+rediscluster+sso]在springboot项目中接入shiro</title>
    <link href="http://yoursite.com/2016/04/09/springboot-shiro-redis-rediscluster-sso-%E5%9C%A8springboot%E9%A1%B9%E7%9B%AE%E4%B8%AD%E6%8E%A5%E5%85%A5shiro/"/>
    <id>http://yoursite.com/2016/04/09/springboot-shiro-redis-rediscluster-sso-在springboot项目中接入shiro/</id>
    <published>2016-04-09T04:52:53.000Z</published>
    <updated>2016-04-09T22:44:27.345Z</updated>
    
    <content type="html">&lt;p&gt;在之前的文章中，分别介绍了springboot启动，在springboot中使用redis作为缓存，在springboot中使用jpa和mybatis，现在将开始一个更大的综合工程：一步步介绍在springboot中使用shiro+redis-cluster+cookie实现一个跨域单点登录的方案。&lt;/p&gt;
&lt;p&gt;现在开始是第一篇：在springboot项目中接入shiro&lt;/p&gt;
&lt;h2 id=&quot;引入shiro的maven依赖&quot;&gt;&lt;a href=&quot;#引入shiro的maven依赖&quot; class=&quot;headerlink&quot; title=&quot;引入shiro的maven依赖&quot;&gt;&lt;/a&gt;引入shiro的maven依赖&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;groupId&amp;gt;org.apache.shiro&amp;lt;/groupId&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;artifactId&amp;gt;shiro-core&amp;lt;/artifactId&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;version&amp;gt;1.2.3&amp;lt;/version&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;groupId&amp;gt;org.apache.shiro&amp;lt;/groupId&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;artifactId&amp;gt;shiro-spring&amp;lt;/artifactId&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;version&amp;gt;1.2.3&amp;lt;/version&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;groupId&amp;gt;org.apache.shiro&amp;lt;/groupId&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;artifactId&amp;gt;shiro-web&amp;lt;/artifactId&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;version&amp;gt;1.2.3&amp;lt;/version&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;groupId&amp;gt;org.apache.shiro&amp;lt;/groupId&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;artifactId&amp;gt;shiro-ehcache&amp;lt;/artifactId&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;version&amp;gt;1.2.3&amp;lt;/version&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;程序具体实现&quot;&gt;&lt;a href=&quot;#程序具体实现&quot; class=&quot;headerlink&quot; title=&quot;程序具体实现&quot;&gt;&lt;/a&gt;程序具体实现&lt;/h2&gt;&lt;h3 id=&quot;首先，需要一个shiro的配置文件，这里使用的是ymal配置。配置文件：application-yml&quot;&gt;&lt;a href=&quot;#首先，需要一个shiro的配置文件，这里使用的是ymal配置。配置文件：application-yml&quot; class=&quot;headerlink&quot; title=&quot;首先，需要一个shiro的配置文件，这里使用的是ymal配置。配置文件：application.yml&quot;&gt;&lt;/a&gt;首先，需要一个shiro的配置文件，这里使用的是ymal配置。配置文件：application.yml&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;shiro:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  realm: com.xxx.xxx.config.security.MyRealm&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  loginUrl: /view/sign-in.html&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  successUrl: /item.html&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  unauthorizedUrl: /forbidden.html&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  filterChainDefinitions:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;/login&amp;quot;: anon&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;/static/**&amp;quot;: anon&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;/bower_components/**&amp;quot;: anon&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;/logout&amp;quot;: logout&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;quot;/**&amp;quot;: authc&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;说明：&lt;br&gt;realm: com.xxx.xxx.config.security.MyRealm&lt;br&gt;Realm，在shiro中相当于数据源，shiro的其他核心组件需要获取用户和认证数据，就是从Realm获取。&lt;br&gt;为了获得更好的自定义功能，通常我们会自己实现一个Realm.&lt;br&gt;所以这里使用realm: com.xxx.xxx.config.security.MyRealm配置了一个自定义的Realm。&lt;br&gt;loginUrl，定义了需要认证用户时，跳转到的登录页面&lt;br&gt;successUrl，定义登录成功后跳转的页面。通常也可以在自己登录认证方法里redirect到需要的页面。&lt;br&gt;unauthorizedUrl，定义未认证时显示的页面。&lt;br&gt;filterChainDefinitions，定义哪些路径应该做何种过滤策略。&lt;br&gt;anon，logout，authc这些都是shiro默认实现的过滤器filter。&lt;br&gt;anon表示可以匿名访问的路径，authc表示需要登录认证的路径&lt;/p&gt;
&lt;p&gt;过滤器链使用最先匹配返回策略，所以我们需要把不需要认证即可访问的路径放在前面。&lt;/p&gt;
&lt;h3 id=&quot;下面是自己实现的自定义Realm：MyRealm&quot;&gt;&lt;a href=&quot;#下面是自己实现的自定义Realm：MyRealm&quot; class=&quot;headerlink&quot; title=&quot;下面是自己实现的自定义Realm：MyRealm&quot;&gt;&lt;/a&gt;下面是自己实现的自定义Realm：MyRealm&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;import org.apache.shiro.authc.AuthenticationException;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import org.apache.shiro.authc.AuthenticationInfo;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import org.apache.shiro.authc.AuthenticationToken;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import org.apache.shiro.authc.SimpleAuthenticationInfo;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import org.apache.shiro.authc.UsernamePasswordToken;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import org.apache.shiro.authz.AuthorizationInfo;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import org.apache.shiro.authz.SimpleAuthorizationInfo;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import org.apache.shiro.realm.AuthorizingRealm;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import org.apache.shiro.subject.PrincipalCollection;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import org.springframework.beans.factory.annotation.Autowired;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import com.xxx.model.base.UserDTO;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import com.xxx.remote.base.UserRemote;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;public class MyRealm extends AuthorizingRealm &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    @Autowired UserRemote userService;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    @Override&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    protected AuthorizationInfo doGetAuthorizationInfo(PrincipalCollection principals) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        UserDTO user = (UserDTO) principals.getPrimaryPrincipal();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        SimpleAuthorizationInfo info = new SimpleAuthorizationInfo();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        List&amp;lt;String&amp;gt; roles = userService.findByUserId(user.getId());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        info.addRoles(roles);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return info;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    @Override&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    protected AuthenticationInfo doGetAuthenticationInfo(AuthenticationToken token) throws AuthenticationException &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        UsernamePasswordToken usernamePasswordToken = (UsernamePasswordToken) token;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        String username = usernamePasswordToken.getUsername();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        UserDTO user = userService.findUserByName(username);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (null != user) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            CredentialsInfoHolder cih = new CredentialsInfoHolder(user.getPassword(), user.getSalt());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            return new SimpleAuthenticationInfo(user, cih, getName());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return null;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;MyRealm集成AuthorizingRealm，需要重写AuthorizingRealm的两个方法：doGetAuthorizationInfo，doGetAuthenticationInfo。&lt;br&gt;AuthorizationInfo represents a single Subject’s stored authorization data (roles, permissions, etc) used during authorization (access control) checks only. &lt;/p&gt;
&lt;p&gt;doGetAuthorizationInfo方法返回一个AuthorizationInfo，AuthorizationInfo对象是一个单一的Subject对象，存储着用户的授权数据，只用于授权检查时使用。&lt;br&gt;doGetAuthenticationInfo方法，针对给定的用户，获取对应用户的认证数据，提供给认证用户身份时使用。&lt;/p&gt;
&lt;p&gt;例子中UserRemote userService是提供用户数据的具体service服务。&lt;/p&gt;
&lt;h3 id=&quot;有了数据源realm和shiro配置文件，现在开始接入shiro配置到spring容器&quot;&gt;&lt;a href=&quot;#有了数据源realm和shiro配置文件，现在开始接入shiro配置到spring容器&quot; class=&quot;headerlink&quot; title=&quot;有了数据源realm和shiro配置文件，现在开始接入shiro配置到spring容器&quot;&gt;&lt;/a&gt;有了数据源realm和shiro配置文件，现在开始接入shiro配置到spring容器&lt;/h3&gt;&lt;h4 id=&quot;springboot-shiro配置类：ShiroAutoConfig-java&quot;&gt;&lt;a href=&quot;#springboot-shiro配置类：ShiroAutoConfig-java&quot; class=&quot;headerlink&quot; title=&quot;springboot shiro配置类：ShiroAutoConfig.java&quot;&gt;&lt;/a&gt;springboot shiro配置类：ShiroAutoConfig.java&lt;/h4&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;import org.apache.shiro.mgt.DefaultSecurityManager;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import org.apache.shiro.realm.Realm;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import org.apache.shiro.spring.web.ShiroFilterFactoryBean;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import org.springframework.beans.BeanUtils;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import org.springframework.beans.factory.annotation.Autowired;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import org.springframework.boot.autoconfigure.condition.ConditionalOnMissingBean;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import org.springframework.boot.context.properties.EnableConfigurationProperties;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import org.springframework.context.annotation.Bean;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import org.springframework.context.annotation.Configuration;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import org.springframework.context.annotation.DependsOn;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import org.springframework.context.annotation.Import;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import com.xxx.xxx.config.security.MyRealm;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;@Configuration&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;@EnableConfigurationProperties(ShiroProperties.class)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;@Import(ShiroManager.class)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;public class ShiroAutoConfig &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    @Autowired private ShiroProperties properties;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    @Bean(name = &amp;quot;realm&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    @DependsOn(&amp;quot;lifecycleBeanPostProcessor&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    @ConditionalOnMissingBean&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    public MyRealm realm() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Class&amp;lt;?&amp;gt; relmClass = properties.getRealm();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        MyRealm r = (MyRealm) BeanUtils.instantiate(relmClass);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        HashedCredentialsMatcher credentialsMatcher = new HashedCredentialsMatcher();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        credentialsMatcher.setHashAlgorithmName(Sha256Hash.ALGORITHM_NAME);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        r.setCredentialsMatcher(credentialsMatcher);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return r;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    @Bean(name = &amp;quot;shiroFilter&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    @DependsOn(&amp;quot;securityManager&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    @ConditionalOnMissingBean&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    public ShiroFilterFactoryBean getShiroFilterFactoryBean(DefaultSecurityManager securityManager, Realm realm) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        MyRealm myRealm = (MyRealm) realm;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        securityManager.setRealm(myRealm);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ShiroFilterFactoryBean shiroFilter = new ShiroFilterFactoryBean();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        shiroFilter.setSecurityManager(securityManager);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        shiroFilter.setLoginUrl(properties.getLoginUrl());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        shiroFilter.setSuccessUrl(properties.getSuccessUrl());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        shiroFilter.setUnauthorizedUrl(properties.getUnauthorizedUrl());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        shiroFilter.setFilterChainDefinitionMap(properties.getFilterChainDefinitions());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return shiroFilter;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;这里例子里说明，我们需要提供realm和shiroFilter两个bean配置给spring容器。&lt;br&gt;getShiroFilterFactoryBean方法返回ShiroFilterFactoryBean，将会把yml里面的配置读取到ShiroFilterFactoryBean中，然后把realm设置进securityManager。&lt;br&gt;yml配置有ShiroProperties类持有并提供给ShiroFilterFactoryBean。&lt;br&gt;当然，还需要配置几个其他配置，都在ShiroManager配置好了。&lt;/p&gt;
&lt;h4 id=&quot;ShiroProperties：&quot;&gt;&lt;a href=&quot;#ShiroProperties：&quot; class=&quot;headerlink&quot; title=&quot;ShiroProperties：&quot;&gt;&lt;/a&gt;ShiroProperties：&lt;/h4&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;import java.util.Map;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import org.springframework.boot.context.properties.ConfigurationProperties;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/**&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * Configuration properties for Shiro.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; */&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;@ConfigurationProperties(prefix = &amp;quot;shiro&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;public class ShiroProperties &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    private Class&amp;lt;?&amp;gt; realm;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    private String loginUrl;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    private String successUrl;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    private String unauthorizedUrl;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    private Map&amp;lt;String, String&amp;gt; filterChainDefinitions;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;ShiroManager：&quot;&gt;&lt;a href=&quot;#ShiroManager：&quot; class=&quot;headerlink&quot; title=&quot;ShiroManager：&quot;&gt;&lt;/a&gt;ShiroManager：&lt;/h4&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;import org.apache.shiro.cache.CacheManager;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import org.apache.shiro.mgt.DefaultSecurityManager;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import org.apache.shiro.session.mgt.SessionManager;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import org.apache.shiro.session.mgt.eis.SessionDAO;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import org.apache.shiro.spring.LifecycleBeanPostProcessor;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import org.apache.shiro.spring.security.interceptor.AuthorizationAttributeSourceAdvisor;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import org.apache.shiro.web.mgt.DefaultWebSecurityManager;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import org.apache.shiro.web.session.mgt.DefaultWebSessionManager;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import org.springframework.aop.framework.autoproxy.DefaultAdvisorAutoProxyCreator;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import org.springframework.boot.autoconfigure.condition.ConditionalOnMissingBean;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import org.springframework.context.annotation.Bean;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import org.springframework.context.annotation.DependsOn;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/**&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * Shiro Config Manager.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; */&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;public class ShiroManager &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    /**&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     * 保证实现了Shiro内部lifecycle函数的bean执行&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     */&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    @Bean(name = &amp;quot;lifecycleBeanPostProcessor&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    @ConditionalOnMissingBean&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    public LifecycleBeanPostProcessor lifecycleBeanPostProcessor() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return new LifecycleBeanPostProcessor();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    @Bean(name = &amp;quot;defaultAdvisorAutoProxyCreator&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    @ConditionalOnMissingBean&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    @DependsOn(&amp;quot;lifecycleBeanPostProcessor&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    public DefaultAdvisorAutoProxyCreator defaultAdvisorAutoProxyCreator() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        DefaultAdvisorAutoProxyCreator defaultAdvisorAutoProxyCreator = new DefaultAdvisorAutoProxyCreator();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        defaultAdvisorAutoProxyCreator.setProxyTargetClass(true);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return defaultAdvisorAutoProxyCreator;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    /**&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     * 用户授权信息Cache&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     */&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    @Bean(name = &amp;quot;cacheManager&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    @ConditionalOnMissingBean&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    public CacheManager cacheManager() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return new MemoryConstrainedCacheManager();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    @Bean(name = &amp;quot;securityManager&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    @ConditionalOnMissingBean&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    public DefaultSecurityManager securityManager(CacheManager cacheManager) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        DefaultSecurityManager sm = new DefaultWebSecurityManager();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        sm.setCacheManager(cacheManager);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return sm;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    @Bean&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    @ConditionalOnMissingBean&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    public AuthorizationAttributeSourceAdvisor getAuthorizationAttributeSourceAdvisor(DefaultSecurityManager securityManager) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        AuthorizationAttributeSourceAdvisor aasa = new AuthorizationAttributeSourceAdvisor();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        aasa.setSecurityManager(securityManager);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return new AuthorizationAttributeSourceAdvisor();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;CacheManager负责缓存，这里简单的使用默认的内存缓存管理MemoryConstrainedCacheManager。&lt;br&gt;如果需要ehcache，或者使用redis作为缓存，则只需要实现自己的CacheManager和SessionManager即可。&lt;/p&gt;
&lt;p&gt;至此，springboot中引入shiro就完成了，其他更多具体使用方法，根据具体而定。&lt;/p&gt;
&lt;h3 id=&quot;这里简单的提供一下在mvc的controller中做登录和登出怎么做。&quot;&gt;&lt;a href=&quot;#这里简单的提供一下在mvc的controller中做登录和登出怎么做。&quot; class=&quot;headerlink&quot; title=&quot;这里简单的提供一下在mvc的controller中做登录和登出怎么做。&quot;&gt;&lt;/a&gt;这里简单的提供一下在mvc的controller中做登录和登出怎么做。&lt;/h3&gt;&lt;p&gt;LoginController：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;import javax.servlet.ServletException;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import javax.servlet.http.HttpServletRequest;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import javax.servlet.http.HttpServletResponse;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import org.apache.shiro.SecurityUtils;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import org.apache.shiro.authc.AuthenticationException;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import org.apache.shiro.authc.IncorrectCredentialsException;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import org.apache.shiro.authc.UnknownAccountException;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import org.apache.shiro.authc.UsernamePasswordToken;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import org.apache.shiro.subject.Subject;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import org.springframework.stereotype.Controller;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import org.springframework.web.bind.annotation.RequestMapping;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import org.springframework.web.bind.annotation.ResponseBody;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;@Controller&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;public class LoginController &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    @RequestMapping(&amp;quot;/login&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    @ResponseBody&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    public void login(HttpServletRequest req, HttpServletResponse resp, String username, String password) throws ServletException, IOException &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Subject subject = SecurityUtils.getSubject();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        String error = null;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        UsernamePasswordToken token = new UsernamePasswordToken(username, password);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        try &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            subject.login(token);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125; catch (UnknownAccountException e) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            error = &amp;quot;用户名/密码错误&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125; catch (IncorrectCredentialsException e) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            error = &amp;quot;用户名/密码错误&amp;quot;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125; catch (AuthenticationException e) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            // 其他错误，比如锁定，如果想单独处理请单独catch处理&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            error = &amp;quot;其他错误：&amp;quot; + e.getMessage();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (error != null) &amp;#123;// 出错了，返回登录页面&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            req.setAttribute(&amp;quot;error&amp;quot;, error);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            resp.sendRedirect(&amp;quot;/forbidden.html&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125; else &amp;#123;// 登录成功&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            resp.sendRedirect(&amp;quot;/index.html&amp;quot;);// 设置跳转的页面&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    @RequestMapping(value = &amp;quot;/logout&amp;quot;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    @ResponseBody&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    public void logout(HttpServletRequest req, HttpServletResponse resp) throws IOException &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Subject currentUser = SecurityUtils.getSubject();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        currentUser.logout();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        resp.sendRedirect(&amp;quot;/index.html&amp;quot;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;done!&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;在之前的文章中，分别介绍了springboot启动，在springboot中使用redis作为缓存，在springboot中使用jpa和mybatis，现在将开始一个更大的综合工程：一步步介绍在springboot中使用shiro+redis-cluster+cookie实
    
    </summary>
    
    
      <category term="java" scheme="http://yoursite.com/tags/java/"/>
    
      <category term="spring boot" scheme="http://yoursite.com/tags/spring-boot/"/>
    
      <category term="shiro" scheme="http://yoursite.com/tags/shiro/"/>
    
  </entry>
  
</feed>
